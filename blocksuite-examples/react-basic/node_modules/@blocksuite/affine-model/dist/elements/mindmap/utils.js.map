{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../src/elements/mindmap/utils.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,gBAAgB,CAC9B,IAAiB,EACjB,OAAiC;IAEjC,MAAM,OAAO,GAAG,IAAI,GAAG,EAAU,CAAC;IAClC,MAAM,IAAI,GAGJ,EAAE,CAAC;IAET,MAAM,QAAQ,GAAG,CACf,IAAiB,EACjB,gBAA+B,EAAE,EACjC,QAAQ,GAAG,KAAK,EAChB,EAAE;QACF,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC;YACzB,IAAI,CAAC,IAAI,CAAC;gBACR,QAAQ;gBACR,KAAK,EAAE,aAAa;aACrB,CAAC,CAAC;YACH,OAAO;QACT,CAAC;QAED,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;QAErB,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAEzB,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE,CAC5B,QAAQ,CAAC,KAAK,EAAE,aAAa,CAAC,KAAK,EAAE,EAAE,QAAQ,CAAC,CACjD,CAAC;IACJ,CAAC,CAAC;IAEF,QAAQ,CAAC,IAAI,CAAC,CAAC;IAEf,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,EAAE;QACrB,IAAI,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,EAAE,CAAC;YACzB,OAAO;QACT,CAAC;QAED,QAAQ,CAAC,IAAI,EAAE,EAAE,EAAE,IAAI,CAAC,CAAC;IAC3B,CAAC,CAAC,CAAC;IAEH,OAAO,IAAI,CAAC;AACd,CAAC","sourcesContent":["import type { MindmapNode } from './mindmap.js';\n\nexport function findInfiniteLoop(\n  root: MindmapNode,\n  nodeMap: Map<string, MindmapNode>\n) {\n  const visited = new Set<string>();\n  const loop: {\n    detached: boolean;\n    chain: MindmapNode[];\n  }[] = [];\n\n  const traverse = (\n    node: MindmapNode,\n    traverseChain: MindmapNode[] = [],\n    detached = false\n  ) => {\n    if (visited.has(node.id)) {\n      loop.push({\n        detached,\n        chain: traverseChain,\n      });\n      return;\n    }\n\n    visited.add(node.id);\n\n    traverseChain.push(node);\n\n    node.children.forEach(child =>\n      traverse(child, traverseChain.slice(), detached)\n    );\n  };\n\n  traverse(root);\n\n  nodeMap.forEach(node => {\n    if (visited.has(node.id)) {\n      return;\n    }\n\n    traverse(node, [], true);\n  });\n\n  return loop;\n}\n"]}