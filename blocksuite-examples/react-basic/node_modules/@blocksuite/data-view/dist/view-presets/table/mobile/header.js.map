{"version":3,"file":"header.js","sourceRoot":"","sources":["../../../../src/view-presets/table/mobile/header.ts"],"names":[],"mappings":"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","sourcesContent":["import { unsafeCSSVarV2 } from '@blocksuite/affine-shared/theme';\nimport { ShadowlessElement } from '@blocksuite/block-std';\nimport { SignalWatcher, WithDisposable } from '@blocksuite/global/utils';\nimport { PlusIcon } from '@blocksuite/icons/lit';\nimport { css, type TemplateResult } from 'lit';\nimport { property, query } from 'lit/decorators.js';\nimport { repeat } from 'lit/directives/repeat.js';\nimport { styleMap } from 'lit/directives/style-map.js';\nimport { html } from 'lit/static-html.js';\n\nimport type { TableSingleView } from '../table-view-manager.js';\n\nexport class MobileTableHeader extends SignalWatcher(\n  WithDisposable(ShadowlessElement)\n) {\n  static override styles = css`\n    .mobile-table-add-column {\n      font-size: 18px;\n      color: ${unsafeCSSVarV2('icon/primary')};\n      margin-left: 8px;\n      display: flex;\n      align-items: center;\n    }\n  `;\n\n  private _onAddColumn = () => {\n    if (this.readonly) return;\n    this.tableViewManager.propertyAdd('end');\n    this.editLastColumnTitle();\n  };\n\n  editLastColumnTitle = () => {\n    const columns = this.querySelectorAll('mobile-table-column-header');\n    const column = columns.item(columns.length - 1);\n    column.editTitle();\n  };\n\n  private get readonly() {\n    return this.tableViewManager.readonly$.value;\n  }\n\n  override render() {\n    return html`\n      ${this.renderGroupHeader?.()}\n      <div class=\"mobile-table-header mobile-table-row\">\n        ${repeat(\n          this.tableViewManager.properties$.value,\n          column => column.id,\n          (column, index) => {\n            const style = styleMap({\n              width: `${column.width$.value}px`,\n              border: index === 0 ? 'none' : undefined,\n            });\n            return html`\n              <mobile-table-column-header\n                style=\"${style}\"\n                data-column-id=\"${column.id}\"\n                data-column-index=\"${index}\"\n                class=\"mobile-table-cell\"\n                .column=\"${column}\"\n                .tableViewManager=\"${this.tableViewManager}\"\n              ></mobile-table-column-header>\n              <div class=\"cell-divider\" style=\"height: auto;\"></div>\n            `;\n          }\n        )}\n        <div @click=\"${this._onAddColumn}\" class=\"mobile-table-add-column\">\n          ${PlusIcon()}\n        </div>\n        <div class=\"scale-div\" style=\"width: 1px;height: 1px;\"></div>\n      </div>\n    `;\n  }\n\n  @property({ attribute: false })\n  accessor renderGroupHeader: (() => TemplateResult) | undefined;\n\n  @query('.scale-div')\n  accessor scaleDiv!: HTMLDivElement;\n\n  @property({ attribute: false })\n  accessor tableViewManager!: TableSingleView;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'mobile-table-header': MobileTableHeader;\n  }\n}\n"]}