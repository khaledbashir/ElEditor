{"version":3,"file":"header.js","sourceRoot":"","sources":["../../../../src/view-presets/kanban/pc/header.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,OAAO,EACL,IAAI,EACJ,OAAO,EACP,sBAAsB,GACvB,MAAM,4CAA4C,CAAC;AACpD,OAAO,EAAE,iBAAiB,EAAE,MAAM,uBAAuB,CAAC;AAC1D,OAAO,EAAE,aAAa,EAAE,cAAc,EAAE,MAAM,0BAA0B,CAAC;AACzE,OAAO,EAAE,GAAG,EAAE,MAAM,KAAK,CAAC;AAC1B,OAAO,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAC7C,OAAO,EAAE,IAAI,EAAE,MAAM,oBAAoB,CAAC;AAI1C,OAAO,EAAE,aAAa,EAAE,MAAM,iCAAiC,CAAC;AAEhE,MAAM,MAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;CAgBjB,CAAC;IAEW,YAAY;sBAAS,aAAa,CAC7C,cAAc,CAAC,iBAAiB,CAAC,CAClC;;;;iBAFY,YAAa,SAAQ,WAEjC;;;gCAiCE,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YAC/B,iKAAS,IAAI,6BAAJ,IAAI,mFAAc;;;iBAjCX,WAAM,GAAG,MAAM,AAAT,CAAU;QAuBvB,MAAM;YACb,OAAO,IAAI,CAAA;;;4CAG6B,IAAI,CAAC,UAAU;;KAEtD,CAAC;QACJ,CAAC;QAGD,uBAA2B;QAA3B,IAAS,IAAI,0CAAc;QAA3B,IAAS,IAAI,gDAAc;;;YA/BnB,eAAU,GAAG,CAAC,CAAa,EAAE,EAAE;gBACrC,MAAM,UAAU,GAAG,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;gBACrD,IAAI,CAAC,UAAU,EAAE,CAAC;oBAChB,OAAO;gBACT,CAAC;gBACD,OAAO,CAAC,sBAAsB,CAAC,CAAC,CAAC,MAAqB,CAAC,EAAE;oBACvD,OAAO,EAAE;wBACP,KAAK,EAAE,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,KAAK;6BAC/B,MAAM,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,KAAK,UAAU,CAAC,SAAS,CAAC,KAAK,EAAE,EAAE,CAAC;6BAC9D,GAAG,CAAC,MAAM,CAAC,EAAE;4BACZ,OAAO,IAAI,CAAC,MAAM,CAAC;gCACjB,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,KAAK;gCACxB,MAAM,EAAE,GAAG,EAAE;oCACX,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,EAAE,CAAC,CAAC;gCACpC,CAAC;6BACF,CAAC,CAAC;wBACL,CAAC,CAAC;qBACL;iBACF,CAAC,CAAC;YACL,CAAC,CAAC;YAYO,kFAAkB;;;;;SApChB,YAAY","sourcesContent":["import {\n  menu,\n  popMenu,\n  popupTargetFromElement,\n} from '@blocksuite/affine-components/context-menu';\nimport { ShadowlessElement } from '@blocksuite/block-std';\nimport { SignalWatcher, WithDisposable } from '@blocksuite/global/utils';\nimport { css } from 'lit';\nimport { property } from 'lit/decorators.js';\nimport { html } from 'lit/static-html.js';\n\nimport type { SingleView } from '../../../core/index.js';\n\nimport { groupTraitKey } from '../../../core/group-by/trait.js';\n\nconst styles = css`\n  affine-data-view-kanban-header {\n    display: flex;\n    justify-content: space-between;\n    padding: 4px;\n  }\n\n  .select-group {\n    border-radius: 8px;\n    padding: 4px 8px;\n    cursor: pointer;\n  }\n\n  .select-group:hover {\n    background-color: var(--affine-hover-color);\n  }\n`;\n\nexport class KanbanHeader extends SignalWatcher(\n  WithDisposable(ShadowlessElement)\n) {\n  static override styles = styles;\n\n  private clickGroup = (e: MouseEvent) => {\n    const groupTrait = this.view.traitGet(groupTraitKey);\n    if (!groupTrait) {\n      return;\n    }\n    popMenu(popupTargetFromElement(e.target as HTMLElement), {\n      options: {\n        items: this.view.properties$.value\n          .filter(column => column.id !== groupTrait.property$.value?.id)\n          .map(column => {\n            return menu.action({\n              name: column.name$.value,\n              select: () => {\n                groupTrait.changeGroup(column.id);\n              },\n            });\n          }),\n      },\n    });\n  };\n\n  override render() {\n    return html`\n      <div></div>\n      <div>\n        <div class=\"select-group\" @click=\"${this.clickGroup}\">Group</div>\n      </div>\n    `;\n  }\n\n  @property({ attribute: false })\n  accessor view!: SingleView;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'affine-data-view-kanban-header': KanbanHeader;\n  }\n}\n"]}