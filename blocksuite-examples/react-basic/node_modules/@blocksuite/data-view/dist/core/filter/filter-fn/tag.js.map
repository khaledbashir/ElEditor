{"version":3,"file":"tag.js","sourceRoot":"","sources":["../../../../src/core/filter/filter-fn/tag.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,EAAE,EAAE,MAAM,iCAAiC,CAAC;AACrD,OAAO,EAAE,CAAC,EAAE,MAAM,+BAA+B,CAAC;AAClD,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,gCAAgC,CAAC;AAC5D,OAAO,EAAE,YAAY,EAAE,MAAM,aAAa,CAAC;AAC3C,OAAO,EAAE,WAAW,EAAE,MAAM,YAAY,CAAC;AAEzC,MAAM,UAAU,GAAG,SAAkB,CAAC;AACtC,MAAM,CAAC,MAAM,SAAS,GAAG;IACvB,YAAY,CAAC;QACX,IAAI,EAAE,SAAS;QACf,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAU;QACnD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC;QACtB,IAAI,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAU;QACpD,KAAK,EAAE,WAAW;QAClB,WAAW,EAAE,CAAC,CAAC,EAAE,CACf,CAAC,CAAC,CAAC,CAAC,KAAK,WAAW,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS;QAC7D,IAAI,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YACpB,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;gBAClB,OAAO,IAAI,CAAC;YACd,CAAC;YACD,IAAI,IAAI,IAAI,IAAI,EAAE,CAAC;gBACjB,OAAO,KAAK,CAAC;YACf,CAAC;YACD,OAAO,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC9B,CAAC;QACD,YAAY,EAAE,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;KACjC,CAAC;IACF,YAAY,CAAC;QACX,IAAI,EAAE,YAAY;QAClB,IAAI,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,CAAC,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC,CAAU;QACnD,IAAI,EAAE,IAAI,CAAC,UAAU,CAAC;QACtB,IAAI,EAAE,CAAC,EAAE,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC,CAAU;QACpD,KAAK,EAAE,eAAe;QACtB,WAAW,EAAE,CAAC,CAAC,EAAE,CACf,CAAC,CAAC,CAAC,CAAC,SAAS,WAAW,CAAC,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS;QACjE,IAAI,EAAE,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE;YACpB,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;gBAClB,OAAO,IAAI,CAAC;YACd,CAAC;YACD,IAAI,IAAI,IAAI,IAAI,EAAE,CAAC;gBACjB,OAAO,IAAI,CAAC;YACd,CAAC;YACD,OAAO,CAAC,KAAK,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;QAC/B,CAAC;KACF,CAAC;CACH,CAAC","sourcesContent":["import { ct } from '../../logical/composite-type.js';\nimport { t } from '../../logical/type-presets.js';\nimport { tRef, tVar } from '../../logical/type-variable.js';\nimport { createFilter } from './create.js';\nimport { tagToString } from './utils.js';\n\nconst optionName = 'options' as const;\nexport const tagFilter = [\n  createFilter({\n    name: 'isOneOf',\n    vars: [tVar(optionName, t.tag.instance())] as const,\n    self: tRef(optionName),\n    args: [ct.array.instance(tRef(optionName))] as const,\n    label: 'Is one of',\n    shortString: v =>\n      v ? `: ${tagToString(v.value, v.type.element)}` : undefined,\n    impl: (self, value) => {\n      if (!value.length) {\n        return true;\n      }\n      if (self == null) {\n        return false;\n      }\n      return value.includes(self);\n    },\n    defaultValue: args => args[0][0],\n  }),\n  createFilter({\n    name: 'isNotOneOf',\n    vars: [tVar(optionName, t.tag.instance())] as const,\n    self: tRef(optionName),\n    args: [ct.array.instance(tRef(optionName))] as const,\n    label: 'Is not one of',\n    shortString: v =>\n      v ? `: Not ${tagToString(v.value, v.type.element)}` : undefined,\n    impl: (self, value) => {\n      if (!value.length) {\n        return true;\n      }\n      if (self == null) {\n        return true;\n      }\n      return !value.includes(self);\n    },\n  }),\n];\n"]}