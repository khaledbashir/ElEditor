{"version":3,"file":"add-sort.js","sourceRoot":"","sources":["../../../src/core/sort/add-sort.ts"],"names":[],"mappings":"AAAA,OAAO,EACL,IAAI,EACJ,OAAO,GAER,MAAM,4CAA4C,CAAC;AAIpD,OAAO,EAAE,YAAY,EAAE,MAAM,mBAAmB,CAAC;AAEjD,MAAM,CAAC,MAAM,aAAa,GAAG,CAC3B,MAAmB,EACnB,KAIC,EACD,EAAE;IACF,OAAO,CAAC,MAAM,EAAE;QACd,OAAO,EAAE;YACP,OAAO,EAAE,KAAK,CAAC,OAAO;YACtB,KAAK,EAAE;gBACL,IAAI,EAAE,UAAU;gBAChB,MAAM,EAAE,KAAK,CAAC,MAAM;aACrB;YACD,KAAK,EAAE;gBACL,IAAI,CAAC,KAAK,CAAC;oBACT,KAAK,EAAE,KAAK,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK;yBAC/B,MAAM,CACL,CAAC,CAAC,EAAE,CACF,CAAC,KAAK,CAAC,SAAS,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CACnC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,KAAK,CAAC,CAAC,EAAE,CAC/B,CACJ;yBACA,GAAG,CAAC,CAAC,CAAC,EAAE,CACP,IAAI,CAAC,MAAM,CAAC;wBACV,IAAI,EAAE,CAAC,CAAC,IAAI;wBACZ,MAAM,EAAE,YAAY,CAAC,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC;wBAChC,MAAM,EAAE,GAAG,EAAE;4BACX,KAAK,CAAC,SAAS,CAAC,GAAG,CAAC;gCAClB,GAAG,EAAE;oCACH,IAAI,EAAE,KAAK;oCACX,IAAI,EAAE,CAAC,CAAC,EAAE;iCACX;gCACD,IAAI,EAAE,KAAK;6BACZ,CAAC,CAAC;wBACL,CAAC;qBACF,CAAC,CACH;iBACJ,CAAC;aACH;SACF;KACF,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["import {\n  menu,\n  popMenu,\n  type PopupTarget,\n} from '@blocksuite/affine-components/context-menu';\n\nimport type { SortUtils } from './utils.js';\n\nimport { renderUniLit } from '../utils/index.js';\n\nexport const popCreateSort = (\n  target: PopupTarget,\n  props: {\n    sortUtils: SortUtils;\n    onClose?: () => void;\n    onBack?: () => void;\n  }\n) => {\n  popMenu(target, {\n    options: {\n      onClose: props.onClose,\n      title: {\n        text: 'New sort',\n        onBack: props.onBack,\n      },\n      items: [\n        menu.group({\n          items: props.sortUtils.vars$.value\n            .filter(\n              v =>\n                !props.sortUtils.sortList$.value.some(\n                  sort => sort.ref.name === v.id\n                )\n            )\n            .map(v =>\n              menu.action({\n                name: v.name,\n                prefix: renderUniLit(v.icon, {}),\n                select: () => {\n                  props.sortUtils.add({\n                    ref: {\n                      type: 'ref',\n                      name: v.id,\n                    },\n                    desc: false,\n                  });\n                },\n              })\n            ),\n        }),\n      ],\n    },\n  });\n};\n"]}