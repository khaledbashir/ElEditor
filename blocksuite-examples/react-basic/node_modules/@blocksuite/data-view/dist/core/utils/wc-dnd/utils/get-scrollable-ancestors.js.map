{"version":3,"file":"get-scrollable-ancestors.js","sourceRoot":"","sources":["../../../../../src/core/utils/wc-dnd/utils/get-scrollable-ancestors.ts"],"names":[],"mappings":"AAAA,MAAM,UAAU,OAAO,CACrB,IAAiB,EACjB,gBAAqC,MAAM,CAAC,gBAAgB,CAAC,IAAI,CAAC;IAElE,OAAO,aAAa,CAAC,QAAQ,KAAK,OAAO,CAAC;AAC5C,CAAC;AAED,MAAM,UAAU,YAAY,CAC1B,OAAoB,EACpB,gBAAqC,MAAM,CAAC,gBAAgB,CAAC,OAAO,CAAC;IAErE,MAAM,aAAa,GAAG,uBAAuB,CAAC;IAC9C,MAAM,UAAU,GAAG,CAAC,UAAU,EAAE,WAAW,EAAE,WAAW,CAAC,CAAC;IAE1D,OAAO,UAAU,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;QAChC,MAAM,KAAK,GAAG,aAAa,CAAC,QAAqC,CAAC,CAAC;QAEnE,OAAO,OAAO,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;IACvE,CAAC,CAAC,CAAC;AACL,CAAC;AAED,MAAM,UAAU,sBAAsB,CACpC,OAAoB,EACpB,KAAc;IAEd,MAAM,aAAa,GAAc,EAAE,CAAC;IAEpC,IAAI,CAAC,OAAO,EAAE,CAAC;QACb,OAAO,aAAa,CAAC;IACvB,CAAC;IAED,IAAI,WAAW,GAAgB,OAAO,CAAC;IAEvC,OAAO,WAAW,EAAE,CAAC;QACnB,IAAI,KAAK,IAAI,IAAI,IAAI,aAAa,CAAC,MAAM,IAAI,KAAK,EAAE,CAAC;YACnD,MAAM;QACR,CAAC;QAED,IAAI,CAAC,CAAC,WAAW,YAAY,WAAW,CAAC,EAAE,CAAC;YAC1C,MAAM;QACR,CAAC;QAED,MAAM,aAAa,GAAG,MAAM,CAAC,gBAAgB,CAAC,WAAW,CAAC,CAAC;QAE3D,IAAI,WAAW,KAAK,OAAO,EAAE,CAAC;YAC5B,IAAI,YAAY,CAAC,WAAW,EAAE,aAAa,CAAC,EAAE,CAAC;gBAC7C,aAAa,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;YAClC,CAAC;QACH,CAAC;QAED,IAAI,OAAO,CAAC,WAAW,EAAE,aAAa,CAAC,EAAE,CAAC;YACxC,MAAM;QACR,CAAC;QAED,WAAW,GAAG,WAAW,CAAC,UAAU,CAAC;IACvC,CAAC;IAED,OAAO,aAAa,CAAC;AACvB,CAAC;AAED,MAAM,UAAU,0BAA0B,CAAC,IAAiB;IAC1D,MAAM,CAAC,uBAAuB,CAAC,GAAG,sBAAsB,CAAC,IAAI,EAAE,CAAC,CAAC,CAAC;IAElE,OAAO,uBAAuB,IAAI,IAAI,CAAC;AACzC,CAAC","sourcesContent":["export function isFixed(\n  node: HTMLElement,\n  computedStyle: CSSStyleDeclaration = window.getComputedStyle(node)\n): boolean {\n  return computedStyle.position === 'fixed';\n}\n\nexport function isScrollable(\n  element: HTMLElement,\n  computedStyle: CSSStyleDeclaration = window.getComputedStyle(element)\n): boolean {\n  const overflowRegex = /(auto|scroll|overlay)/;\n  const properties = ['overflow', 'overflowX', 'overflowY'];\n\n  return properties.some(property => {\n    const value = computedStyle[property as keyof CSSStyleDeclaration];\n\n    return typeof value === 'string' ? overflowRegex.test(value) : false;\n  });\n}\n\nexport function getScrollableAncestors(\n  element: Node | null,\n  limit?: number\n): Element[] {\n  const scrollParents: Element[] = [];\n\n  if (!element) {\n    return scrollParents;\n  }\n\n  let currentNode: Node | null = element;\n\n  while (currentNode) {\n    if (limit != null && scrollParents.length >= limit) {\n      break;\n    }\n\n    if (!(currentNode instanceof HTMLElement)) {\n      break;\n    }\n\n    const computedStyle = window.getComputedStyle(currentNode);\n\n    if (currentNode !== element) {\n      if (isScrollable(currentNode, computedStyle)) {\n        scrollParents.push(currentNode);\n      }\n    }\n\n    if (isFixed(currentNode, computedStyle)) {\n      break;\n    }\n\n    currentNode = currentNode.parentNode;\n  }\n\n  return scrollParents;\n}\n\nexport function getFirstScrollableAncestor(node: Node | null): Element | null {\n  const [firstScrollableAncestor] = getScrollableAncestors(node, 1);\n\n  return firstScrollableAncestor ?? null;\n}\n"]}