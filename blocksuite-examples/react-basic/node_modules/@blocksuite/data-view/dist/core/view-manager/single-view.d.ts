import type { InsertToPosition } from '@blocksuite/affine-shared/utils';
import { type ReadonlySignal } from '@preact/signals-core';
import type { DataViewContextKey } from '../data-source/context.js';
import type { Variable } from '../expression/types.js';
import type { DVJSON } from '../index.js';
import type { TypeInstance } from '../logical/type.js';
import type { PropertyMetaConfig } from '../property/property-config.js';
import type { TraitKey } from '../traits/key.js';
import type { DatabaseFlags } from '../types.js';
import type { UniComponent } from '../utils/uni-component/index.js';
import type { DataViewDataType, ViewMeta } from '../view/data-view.js';
import type { Property } from './property.js';
import type { ViewManager } from './view-manager.js';
import { type Cell } from './cell.js';
import { type Row } from './row.js';
export type MainProperties = {
    titleColumn?: string;
    iconColumn?: string;
    imageColumn?: string;
};
export interface SingleView {
    readonly id: string;
    readonly type: string;
    readonly manager: ViewManager;
    readonly meta: ViewMeta;
    readonly readonly$: ReadonlySignal<boolean>;
    delete(): void;
    duplicate(): void;
    readonly name$: ReadonlySignal<string>;
    nameSet(name: string): void;
    readonly propertyIds$: ReadonlySignal<string[]>;
    readonly propertiesWithoutFilter$: ReadonlySignal<string[]>;
    readonly properties$: ReadonlySignal<Property[]>;
    readonly detailProperties$: ReadonlySignal<string[]>;
    readonly rows$: ReadonlySignal<string[]>;
    readonly vars$: ReadonlySignal<Variable[]>;
    readonly featureFlags$: ReadonlySignal<DatabaseFlags>;
    cellValueGet(rowId: string, propertyId: string): unknown;
    cellValueSet(rowId: string, propertyId: string, value: unknown): void;
    cellJsonValueGet(rowId: string, propertyId: string): unknown;
    cellJsonValueSet(rowId: string, propertyId: string, value: DVJSON): void;
    cellStringValueGet(rowId: string, propertyId: string): string | undefined;
    cellGet(rowId: string, propertyId: string): Cell;
    propertyParseValueFromString(propertyId: string, value: string): {
        value: unknown;
        data?: Record<string, unknown>;
    } | undefined;
    rowAdd(insertPosition: InsertToPosition): string;
    rowDelete(ids: string[]): void;
    rowMove(rowId: string, position: InsertToPosition): void;
    rowGet(rowId: string): Row;
    rowPrevGet(rowId: string): string;
    rowNextGet(rowId: string): string;
    readonly propertyMetas: PropertyMetaConfig[];
    propertyAdd(toAfterOfProperty: InsertToPosition, type?: string): string;
    propertyDelete(propertyId: string): void;
    propertyDuplicate(propertyId: string): void;
    propertyGet(propertyId: string): Property;
    propertyMetaGet(type: string): PropertyMetaConfig | undefined;
    propertyPreGet(propertyId: string): Property | undefined;
    propertyNextGet(propertyId: string): Property | undefined;
    propertyNameGet(propertyId: string): string;
    propertyNameSet(propertyId: string, name: string): void;
    propertyTypeGet(propertyId: string): string | undefined;
    propertyTypeSet(propertyId: string, type: string): void;
    propertyHideGet(propertyId: string): boolean;
    propertyHideSet(propertyId: string, hide: boolean): void;
    propertyDataGet(propertyId: string): Record<string, unknown>;
    propertyDataSet(propertyId: string, data: Record<string, unknown>): void;
    propertyDataTypeGet(propertyId: string): TypeInstance | undefined;
    propertyIndexGet(propertyId: string): number;
    propertyIdGetByIndex(index: number): string;
    propertyReadonlyGet(propertyId: string): boolean;
    propertyMove(propertyId: string, position: InsertToPosition): void;
    propertyIconGet(type: string): UniComponent | undefined;
    contextGet<T>(key: DataViewContextKey<T>): T;
    traitGet<T>(key: TraitKey<T>): T | undefined;
    mainProperties$: ReadonlySignal<MainProperties>;
    lockRows(lock: boolean): void;
    isLocked$: ReadonlySignal<boolean>;
}
export declare abstract class SingleViewBase<ViewData extends DataViewDataType = DataViewDataType> implements SingleView {
    manager: ViewManager;
    id: string;
    private searchString;
    private traitMap;
    data$: ReadonlySignal<ViewData | undefined>;
    abstract detailProperties$: ReadonlySignal<string[]>;
    protected lockRows$: import("@preact/signals-core").Signal<boolean>;
    isLocked$: ReadonlySignal<boolean>;
    abstract mainProperties$: ReadonlySignal<MainProperties>;
    name$: ReadonlySignal<string>;
    preRows: string[];
    abstract propertyIds$: ReadonlySignal<string[]>;
    properties$: ReadonlySignal<ReturnType<this["propertyGet"]>[]>;
    abstract propertiesWithoutFilter$: ReadonlySignal<string[]>;
    abstract readonly$: ReadonlySignal<boolean>;
    rows$: ReadonlySignal<string[]>;
    vars$: ReadonlySignal<{
        id: string;
        name: string;
        type: TypeInstance;
        icon: UniComponent | undefined;
        propertyType: string;
    }[]>;
    protected get dataSource(): import("../index.js").DataSource;
    get featureFlags$(): ReadonlySignal<DatabaseFlags>;
    get isLocked(): boolean;
    get meta(): ViewMeta;
    get propertyMetas(): PropertyMetaConfig[];
    abstract get type(): string;
    constructor(manager: ViewManager, id: string);
    private searchRowsMapping;
    cellGet(rowId: string, propertyId: string): Cell;
    cellJsonValueGet(rowId: string, propertyId: string): unknown;
    cellJsonValueSet(rowId: string, propertyId: string, value: DVJSON): void;
    cellStringValueGet(rowId: string, propertyId: string): string | undefined;
    cellValueGet(rowId: string, propertyId: string): unknown;
    cellValueSet(rowId: string, propertyId: string, value: unknown): void;
    contextGet<T>(key: DataViewContextKey<T>): T;
    dataUpdate(updater: (viewData: ViewData) => Partial<ViewData>): void;
    delete(): void;
    duplicate(): void;
    abstract isShow(rowId: string): boolean;
    lockRows(lock: boolean): void;
    nameSet(name: string): void;
    propertyAdd(position: InsertToPosition, type?: string): string;
    propertyDataGet(propertyId: string): Record<string, unknown>;
    propertyDataSet(propertyId: string, data: Record<string, unknown>): void;
    propertyDataTypeGet(propertyId: string): TypeInstance | undefined;
    propertyDelete(propertyId: string): void;
    propertyDuplicate(propertyId: string): void;
    abstract propertyGet(propertyId: string): Property;
    abstract propertyHideGet(propertyId: string): boolean;
    abstract propertyHideSet(propertyId: string, hide: boolean): void;
    propertyIconGet(type: string): UniComponent | undefined;
    propertyIdGetByIndex(index: number): string;
    propertyIndexGet(propertyId: string): number;
    propertyMetaGet(type: string): PropertyMetaConfig;
    abstract propertyMove(propertyId: string, position: InsertToPosition): void;
    propertyNameGet(propertyId: string): string;
    propertyNameSet(propertyId: string, name: string): void;
    propertyNextGet(propertyId: string): Property | undefined;
    propertyParseValueFromString(propertyId: string, cellData: string): {
        value: unknown;
        data?: Record<string, unknown>;
    } | undefined;
    propertyPreGet(propertyId: string): Property | undefined;
    propertyReadonlyGet(propertyId: string): boolean;
    propertyTypeGet(propertyId: string): string | undefined;
    propertyTypeSet(propertyId: string, type: string): void;
    rowAdd(insertPosition: InsertToPosition | number): string;
    rowDelete(ids: string[]): void;
    rowGet(rowId: string): Row;
    rowMove(rowId: string, position: InsertToPosition): void;
    abstract rowNextGet(rowId: string): string;
    abstract rowPrevGet(rowId: string): string;
    protected rowsMapping(rows: string[]): string[];
    setSearch(str: string): void;
    traitGet<T>(key: TraitKey<T>): T | undefined;
    protected traitSet<T>(key: TraitKey<T>, value: T): T;
}
//# sourceMappingURL=single-view.d.ts.map