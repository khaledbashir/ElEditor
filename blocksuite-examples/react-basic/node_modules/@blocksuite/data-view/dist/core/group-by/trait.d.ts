import { type InsertToPosition } from '@blocksuite/affine-shared/utils';
import { type ReadonlySignal } from '@preact/signals-core';
import type { GroupBy, GroupProperty } from '../common/types.js';
import type { TypeInstance } from '../logical/type.js';
import type { DVJSON } from '../property/types.js';
import type { Property } from '../view-manager/property.js';
import type { SingleView } from '../view-manager/single-view.js';
export type GroupData = {
    manager: GroupTrait;
    property: Property;
    key: string;
    name: string;
    type: TypeInstance;
    value: DVJSON;
    rows: string[];
};
export declare class GroupTrait {
    private groupBy$;
    view: SingleView;
    private ops;
    private preDataList;
    config$: ReadonlySignal<import("./types.js").GroupByConfig | undefined>;
    property$: ReadonlySignal<Property<unknown, Record<string, unknown>> | undefined>;
    staticGroupDataMap$: ReadonlySignal<Record<string, Omit<GroupData, "rows">> | undefined>;
    groupDataMap$: ReadonlySignal<Record<string, GroupData> | undefined>;
    private _groupsDataList$;
    groupsDataList$: ReadonlySignal<GroupData[] | undefined>;
    updateData: (data: NonNullable<unknown>) => void;
    get addGroup(): ((config: import("../property/types.js").WithCommonPropertyConfig<{
        text: string;
        oldData: {};
    }>) => {}) | undefined;
    get propertyId(): string | undefined;
    constructor(groupBy$: ReadonlySignal<GroupBy | undefined>, view: SingleView, ops: {
        groupBySet: (groupBy: GroupBy | undefined) => void;
        sortGroup: (keys: string[]) => string[];
        sortRow: (groupKey: string, rowIds: string[]) => string[];
        changeGroupSort: (keys: string[]) => void;
        changeRowSort: (groupKeys: string[], groupKey: string, keys: string[]) => void;
    });
    addToGroup(rowId: string, key: string): void;
    changeCardSort(groupKey: string, cardIds: string[]): void;
    changeGroup(columnId: string | undefined): void;
    changeGroupSort(keys: string[]): void;
    defaultGroupProperty(key: string): GroupProperty;
    moveCardTo(rowId: string, fromGroupKey: string | undefined, toGroupKey: string, position: InsertToPosition): void;
    moveGroupTo(groupKey: string, position: InsertToPosition): void;
    removeFromGroup(rowId: string, key: string): void;
    updateValue(rows: string[], value: DVJSON): void;
}
export declare const groupTraitKey: import("../traits/key.js").TraitKey<GroupTrait>;
export declare const sortByManually: <T>(arr: T[], getId: (v: T) => string, ids: string[]) => T[];
//# sourceMappingURL=trait.d.ts.map