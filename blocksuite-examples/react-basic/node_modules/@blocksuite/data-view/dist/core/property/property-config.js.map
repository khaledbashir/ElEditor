{"version":3,"file":"property-config.js","sourceRoot":"","sources":["../../../src/core/property/property-config.ts"],"names":[],"mappings":"AAyCA,MAAM,CAAC,MAAM,YAAY,GAAG,CAAsB,IAAU,EAAE,EAAE,CAAC,CAAC;IAChE,IAAI,EAAE,IAAI;IACV,WAAW,EAAE,CAIX,GAA2C,EACE,EAAE;QAC/C,MAAM,MAAM,GAAyB,CAAC,IAAI,EAAE,IAAI,EAAE,EAAE;YAClD,OAAO;gBACL,IAAI;gBACJ,IAAI;gBACJ,IAAI,EAAE,IAAI,IAAI,GAAG,CAAC,WAAW,EAAE;aAChC,CAAC;QACJ,CAAC,CAAC;QACF,OAAO;YACL,IAAI;YACJ,MAAM,EAAE,GAAG;YACX,MAAM;YACN,kBAAkB,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC;gBAC/B,IAAI;gBACJ,MAAM,EAAE,GAAG;gBACX,MAAM;gBACN,QAAQ,EAAE;oBACR,IAAI;oBACJ,GAAG,QAAQ;iBACZ;aACF,CAAC;SACH,CAAC;IACJ,CAAC;CACF,CAAC,CAAC","sourcesContent":["import type { Renderer } from './renderer.js';\nimport type { PropertyConfig } from './types.js';\n\nexport type PropertyMetaConfig<\n  Type extends string = string,\n  PropertyData extends NonNullable<unknown> = NonNullable<unknown>,\n  CellData = unknown,\n> = {\n  type: Type;\n  config: PropertyConfig<PropertyData, CellData>;\n  create: Create<PropertyData>;\n  renderer: Renderer<PropertyData, CellData>;\n};\ntype CreatePropertyMeta<\n  Type extends string = string,\n  PropertyData extends Record<string, unknown> = Record<string, never>,\n  CellData = unknown,\n> = (\n  renderer: Omit<Renderer<PropertyData, CellData>, 'type'>\n) => PropertyMetaConfig<Type, PropertyData, CellData>;\ntype Create<\n  PropertyData extends Record<string, unknown> = Record<string, never>,\n> = (\n  name: string,\n  data?: PropertyData\n) => {\n  type: string;\n  name: string;\n  statCalcOp?: string;\n  data: PropertyData;\n};\nexport type PropertyModel<\n  Type extends string = string,\n  PropertyData extends Record<string, unknown> = Record<string, never>,\n  CellData = unknown,\n> = {\n  type: Type;\n  config: PropertyConfig<PropertyData, CellData>;\n  create: Create<PropertyData>;\n  createPropertyMeta: CreatePropertyMeta<Type, PropertyData, CellData>;\n};\nexport const propertyType = <Type extends string>(type: Type) => ({\n  type: type,\n  modelConfig: <\n    CellData,\n    PropertyData extends Record<string, unknown> = Record<string, never>,\n  >(\n    ops: PropertyConfig<PropertyData, CellData>\n  ): PropertyModel<Type, PropertyData, CellData> => {\n    const create: Create<PropertyData> = (name, data) => {\n      return {\n        type,\n        name,\n        data: data ?? ops.defaultData(),\n      };\n    };\n    return {\n      type,\n      config: ops,\n      create,\n      createPropertyMeta: renderer => ({\n        type,\n        config: ops,\n        create,\n        renderer: {\n          type,\n          ...renderer,\n        },\n      }),\n    };\n  },\n});\n"]}