{"version":3,"file":"data-view.js","sourceRoot":"","sources":["../../../src/core/view/data-view.ts"],"names":[],"mappings":"AA+DA,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAsB,IAAU,EAAE,EAAE,CAAC,CAAC;IAC5D,IAAI;IACJ,WAAW,EAAE,CACX,KAAgC,EAGhC,EAAE,CAAC,CAAC;QACJ,IAAI;QACJ,KAAK;QACL,UAAU,EAAE,QAAQ,CAAC,EAAE,CAAC,CAAC;YACvB,IAAI;YACJ,KAAK;YACL,QAAQ;SACT,CAAC;KACH,CAAC;CACH,CAAC,CAAC","sourcesContent":["import type { UniComponent } from '../utils/uni-component/index.js';\nimport type { SingleView } from '../view-manager/single-view.js';\nimport type { ViewManager } from '../view-manager/view-manager.js';\nimport type { DataViewInstance, DataViewProps } from './types.js';\n\nexport type BasicViewDataType<\n  Type extends string = string,\n  T = NonNullable<unknown>,\n> = {\n  id: string;\n  name: string;\n  mode: Type;\n} & T;\n\nexport type DefaultViewDataType = BasicViewDataType & {\n  mode: string;\n};\n\nexport type DataViewDataType = DefaultViewDataType;\n\nexport type DataViewMode = string;\n\nexport interface DataViewModelConfig<\n  Data extends DataViewDataType = DataViewDataType,\n> {\n  defaultName: string;\n  dataViewManager: new (viewManager: ViewManager, viewId: string) => SingleView;\n  defaultData: (viewManager: ViewManager) => Omit<Data, 'id' | 'name' | 'mode'>;\n}\n\nexport type DataViewModel<\n  Type extends string = DataViewMode,\n  Data extends DataViewDataType = DataViewDataType,\n> = {\n  type: Type;\n  model: DataViewModelConfig<Data>;\n};\n\nexport type GetDataFromDataViewModel<Model> =\n  Model extends DataViewModel<infer _, infer R> ? R : never;\n\ntype DataViewComponent = UniComponent<\n  {\n    props: DataViewProps;\n  },\n  {\n    expose: DataViewInstance;\n  }\n>;\n\nexport interface DataViewRendererConfig {\n  view: DataViewComponent;\n  mobileView?: DataViewComponent;\n  icon: UniComponent;\n}\n\nexport type ViewMeta<\n  Type extends string = DataViewMode,\n  Data extends DataViewDataType = DataViewDataType,\n> = DataViewModel<Type, Data> & {\n  renderer: DataViewRendererConfig;\n};\n\nexport const viewType = <Type extends string>(type: Type) => ({\n  type,\n  createModel: <Data extends DataViewDataType>(\n    model: DataViewModelConfig<Data>\n  ): DataViewModel<Type, Data> & {\n    createMeta: (renderer: DataViewRendererConfig) => ViewMeta<Type, Data>;\n  } => ({\n    type,\n    model,\n    createMeta: renderer => ({\n      type,\n      model,\n      renderer,\n    }),\n  }),\n});\n"]}