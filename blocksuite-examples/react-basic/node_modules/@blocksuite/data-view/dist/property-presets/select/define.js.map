{"version":3,"file":"define.js","sourceRoot":"","sources":["../../../src/property-presets/select/define.ts"],"names":[],"mappings":"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","sourcesContent":["import { nanoid } from '@blocksuite/store';\n\nimport { getTagColor } from '../../core/component/tags/colors.js';\nimport { type SelectTag, t } from '../../core/index.js';\nimport { propertyType } from '../../core/property/property-config.js';\n\nexport const selectPropertyType = propertyType('select');\n\nexport type SelectPropertyData = {\n  options: SelectTag[];\n};\nexport const selectPropertyModelConfig = selectPropertyType.modelConfig<\n  string,\n  SelectPropertyData\n>({\n  name: 'Select',\n  type: ({ data }) => t.tag.instance(data.options),\n  defaultData: () => ({\n    options: [],\n  }),\n  addGroup: ({ text, oldData }) => {\n    return {\n      options: [\n        ...(oldData.options ?? []),\n        { id: nanoid(), value: text, color: getTagColor() },\n      ],\n    };\n  },\n  cellToString: ({ value, data }) =>\n    data.options.find(v => v.id === value)?.value ?? '',\n  cellFromString: ({ value: oldValue, data }) => {\n    if (!oldValue) {\n      return { value: null, data: data };\n    }\n    const optionMap = Object.fromEntries(data.options.map(v => [v.value, v]));\n    const name = oldValue\n      .split(',')\n      .map(v => v.trim())\n      .filter(v => v)[0];\n\n    let value: string | undefined;\n    const option = optionMap[name];\n    if (!option) {\n      const newOption: SelectTag = {\n        id: nanoid(),\n        value: name,\n        color: getTagColor(),\n      };\n      data.options.push(newOption);\n      value = newOption.id;\n    } else {\n      value = option.id;\n    }\n\n    return {\n      value,\n      data: data,\n    };\n  },\n  cellToJson: ({ value }) => value ?? null,\n  cellFromJson: ({ value }) => (typeof value !== 'string' ? undefined : value),\n  isEmpty: ({ value }) => value == null,\n});\n"]}