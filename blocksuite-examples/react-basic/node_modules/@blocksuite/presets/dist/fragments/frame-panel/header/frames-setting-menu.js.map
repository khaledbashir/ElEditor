{"version":3,"file":"frames-setting-menu.js","sourceRoot":"","sources":["../../../../src/fragments/frame-panel/header/frames-setting-menu.ts"],"names":[],"mappings":"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","sourcesContent":["import type { EditorHost } from '@blocksuite/block-std';\n\nimport { EdgelessRootService, EditPropsStore } from '@blocksuite/blocks';\nimport { WithDisposable } from '@blocksuite/global/utils';\nimport { css, html, LitElement, type PropertyValues } from 'lit';\nimport { property, state } from 'lit/decorators.js';\n\nconst styles = css`\n  :host {\n    display: block;\n    box-sizing: border-box;\n    padding: 8px;\n    width: 220px;\n  }\n\n  .frames-setting-menu-container {\n    display: flex;\n    flex-direction: column;\n    box-sizing: border-box;\n    width: 100%;\n  }\n\n  .frames-setting-menu-item {\n    display: flex;\n    box-sizing: border-box;\n    width: 100%;\n    height: 28px;\n    padding: 4px 12px;\n    align-items: center;\n  }\n\n  .frames-setting-menu-item .setting-label {\n    font-size: 12px;\n    font-weight: 500;\n    line-height: 20px;\n    color: var(--affine-text-secondary-color);\n    padding: 0 4px;\n  }\n\n  .frames-setting-menu-divider {\n    width: 100%;\n    height: 1px;\n    box-sizing: border-box;\n    background: var(--affine-border-color);\n    margin: 8px 0;\n  }\n\n  .frames-setting-menu-item.action {\n    gap: 4px;\n  }\n\n  .frames-setting-menu-item .action-label {\n    width: 138px;\n    height: 20px;\n    padding: 0 4px;\n    font-size: 12px;\n    font-weight: 500;\n    line-height: 20px;\n    color: var(--affine-text-primary-color);\n  }\n\n  .frames-setting-menu-item .toggle-button {\n    display: flex;\n  }\n\n  menu-divider {\n    height: 16px;\n  }\n`;\n\nexport const AFFINE_FRAMES_SETTING_MENU = 'affine-frames-setting-menu';\n\nexport class FramesSettingMenu extends WithDisposable(LitElement) {\n  static override styles = styles;\n\n  private _onBlackBackgroundChange = (checked: boolean) => {\n    this.blackBackground = checked;\n    this._edgelessRootService?.slots.navigatorSettingUpdated.emit({\n      blackBackground: this.blackBackground,\n    });\n  };\n\n  private _onFillScreenChange = (checked: boolean) => {\n    this.fillScreen = checked;\n    this._edgelessRootService?.slots.navigatorSettingUpdated.emit({\n      fillScreen: this.fillScreen,\n    });\n    this._editPropsStore.setStorage('presentFillScreen', this.fillScreen);\n  };\n\n  private _onHideToolBarChange = (checked: boolean) => {\n    this.hideToolbar = checked;\n    this._edgelessRootService?.slots.navigatorSettingUpdated.emit({\n      hideToolbar: this.hideToolbar,\n    });\n    this._editPropsStore.setStorage('presentHideToolbar', this.hideToolbar);\n  };\n\n  private get _edgelessRootService() {\n    return this.editorHost.std.getOptional(EdgelessRootService);\n  }\n\n  private get _editPropsStore() {\n    return this.editorHost.std.get(EditPropsStore);\n  }\n\n  private _tryRestoreSettings() {\n    const blackBackground = this._editPropsStore.getStorage(\n      'presentBlackBackground'\n    );\n\n    this.blackBackground = blackBackground ?? true;\n    this.fillScreen =\n      this._editPropsStore.getStorage('presentFillScreen') ?? false;\n    this.hideToolbar =\n      this._editPropsStore.getStorage('presentHideToolbar') ?? false;\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n    this._tryRestoreSettings();\n  }\n\n  override render() {\n    return html`<div\n      class=\"frames-setting-menu-container\"\n      @click=${(e: MouseEvent) => {\n        e.stopPropagation();\n      }}\n    >\n      <div class=\"frames-setting-menu-item\">\n        <div class=\"setting-label\">Preview Settings</div>\n      </div>\n      <div class=\"frames-setting-menu-item action\">\n        <div class=\"action-label\">Fill Screen</div>\n        <div class=\"toggle-button\">\n          <toggle-switch\n            .on=${this.fillScreen}\n            .onChange=${this._onFillScreenChange}\n          ></toggle-switch>\n        </div>\n      </div>\n\n      <menu-divider></menu-divider>\n\n      <div class=\"frames-setting-menu-item\">\n        <div class=\"setting-label\">Playback Settings</div>\n      </div>\n      <div class=\"frames-setting-menu-item action\">\n        <div class=\"action-label\">Dark background</div>\n        <div class=\"toggle-button\">\n          <toggle-switch\n            .on=${this.blackBackground}\n            .onChange=${this._onBlackBackgroundChange}\n          ></toggle-switch>\n        </div>\n      </div>\n      <div class=\"frames-setting-menu-item action\">\n        <div class=\"action-label\">Hide toolbar</div>\n        <div class=\"toggle-button\">\n          <toggle-switch\n            .on=${this.hideToolbar}\n            .onChange=${this._onHideToolBarChange}\n          ></toggle-switch>\n        </div>\n      </div>\n    </div>`;\n  }\n\n  override updated(_changedProperties: PropertyValues) {\n    if (_changedProperties.has('editorHost')) {\n      if (this._edgelessRootService) {\n        this.disposables.add(\n          this._edgelessRootService.slots.navigatorSettingUpdated.on(\n            ({ blackBackground, hideToolbar }) => {\n              if (\n                blackBackground !== undefined &&\n                blackBackground !== this.blackBackground\n              ) {\n                this.blackBackground = blackBackground;\n              }\n\n              if (\n                hideToolbar !== undefined &&\n                hideToolbar !== this.hideToolbar\n              ) {\n                this.hideToolbar = hideToolbar;\n              }\n            }\n          )\n        );\n      } else {\n        this.disposables.dispose();\n      }\n    }\n  }\n\n  @state()\n  accessor blackBackground = false;\n\n  @property({ attribute: false })\n  accessor editorHost!: EditorHost;\n\n  @state()\n  accessor fillScreen = false;\n\n  @state()\n  accessor hideToolbar = false;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    [AFFINE_FRAMES_SETTING_MENU]: FramesSettingMenu;\n  }\n}\n"]}