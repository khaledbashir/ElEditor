{"version":3,"file":"hightlight.js","sourceRoot":"","sources":["../../src/selection/hightlight.ts"],"names":[],"mappings":"AAAA,OAAO,EAEL,qBAAqB,GACtB,MAAM,0BAA0B,CAAC;AAClC,OAAO,EAAE,aAAa,EAAE,kBAAkB,EAAE,MAAM,uBAAuB,CAAC;AAE1E,MAAM,OAAO,kBAAmB,SAAQ,aAAa;aACnC,UAAK,GAAG,OAAO,AAAV,CAAW;aAEhB,SAAI,GAAG,WAAW,AAAd,CAAe;IAQnC,YAAY,EAAE,IAAI,EAAE,QAAQ,EAAE,UAAU,EAAmB;QACzD,KAAK,CAAC,EAAE,OAAO,EAAE,mBAAmB,EAAE,CAAC,CAAC;QAPjC,aAAQ,GAAa,EAAE,CAAC;QAExB,eAAU,GAAa,EAAE,CAAC;QAE1B,SAAI,GAAwB,MAAM,CAAC;QAK1C,IAAI,CAAC,IAAI,GAAG,IAAI,IAAI,MAAM,CAAC;QAC3B,IAAI,CAAC,QAAQ,GAAG,QAAQ,IAAI,EAAE,CAAC;QAC/B,IAAI,CAAC,UAAU,GAAG,UAAU,IAAI,EAAE,CAAC;IACrC,CAAC;IAED,MAAM,CAAU,QAAQ,CAAC,IAA6B;QACpD,MAAM,MAAM,GAAG,qBAAqB,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;QACjD,OAAO,IAAI,kBAAkB,CAAC,MAAM,CAAC,CAAC;IACxC,CAAC;IAEQ,MAAM,CAAC,KAAyB;QACvC,OAAO,CACL,IAAI,CAAC,IAAI,KAAK,KAAK,CAAC,IAAI;YACxB,IAAI,CAAC,OAAO,KAAK,KAAK,CAAC,OAAO;YAC9B,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,KAAK,CAAC,QAAQ,CAAC,MAAM;YAC9C,IAAI,CAAC,UAAU,CAAC,MAAM,KAAK,KAAK,CAAC,UAAU,CAAC,MAAM;YAClD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,KAAK,KAAK,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;YACxD,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,EAAE,EAAE,CAAC,EAAE,KAAK,KAAK,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAC7D,CAAC;IACJ,CAAC;IAEQ,MAAM;QACb,OAAO;YACL,IAAI,EAAE,WAAW;YACjB,IAAI,EAAE,IAAI,CAAC,IAAI;YACf,OAAO,EAAE,IAAI,CAAC,OAAO;YACrB,QAAQ,EAAE,IAAI,CAAC,QAAQ;YACvB,UAAU,EAAE,IAAI,CAAC,UAAU;SAC5B,CAAC;IACJ,CAAC;;AAWH,MAAM,CAAC,MAAM,2BAA2B,GACtC,kBAAkB,CAAC,kBAAkB,CAAC,CAAC","sourcesContent":["import {\n  type ReferenceParams,\n  ReferenceParamsSchema,\n} from '@blocksuite/affine-model';\nimport { BaseSelection, SelectionExtension } from '@blocksuite/block-std';\n\nexport class HighlightSelection extends BaseSelection {\n  static override group = 'scene';\n\n  static override type = 'highlight';\n\n  readonly blockIds: string[] = [];\n\n  readonly elementIds: string[] = [];\n\n  readonly mode: 'page' | 'edgeless' = 'page';\n\n  constructor({ mode, blockIds, elementIds }: ReferenceParams) {\n    super({ blockId: '[scene-highlight]' });\n\n    this.mode = mode ?? 'page';\n    this.blockIds = blockIds ?? [];\n    this.elementIds = elementIds ?? [];\n  }\n\n  static override fromJSON(json: Record<string, unknown>): HighlightSelection {\n    const result = ReferenceParamsSchema.parse(json);\n    return new HighlightSelection(result);\n  }\n\n  override equals(other: HighlightSelection): boolean {\n    return (\n      this.mode === other.mode &&\n      this.blockId === other.blockId &&\n      this.blockIds.length === other.blockIds.length &&\n      this.elementIds.length === other.elementIds.length &&\n      this.blockIds.every((id, n) => id === other.blockIds[n]) &&\n      this.elementIds.every((id, n) => id === other.elementIds[n])\n    );\n  }\n\n  override toJSON(): Record<string, unknown> {\n    return {\n      type: 'highlight',\n      mode: this.mode,\n      blockId: this.blockId,\n      blockIds: this.blockIds,\n      elementIds: this.elementIds,\n    };\n  }\n}\n\ndeclare global {\n  namespace BlockSuite {\n    interface Selection {\n      highlight: typeof HighlightSelection;\n    }\n  }\n}\n\nexport const HighlightSelectionExtension =\n  SelectionExtension(HighlightSelection);\n"]}