{"version":3,"file":"duplicate-selected-model.js","sourceRoot":"","sources":["../../../src/commands/model-crud/duplicate-selected-model.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AAE1C,MAAM,CAAC,MAAM,8BAA8B,GAEvC,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;IAChB,MAAM,EAAE,GAAG,EAAE,aAAa,EAAE,cAAc,EAAE,GAAG,GAAG,CAAC;IACnD,IAAI,CAAC,aAAa,IAAI,CAAC,cAAc;QAAE,OAAO;IAE9C,MAAM,KAAK,GAAG,cAAc,CAAC,cAAc,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;IAExD,MAAM,WAAW,GAAG,GAAG,CAAC,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;IAChD,IAAI,CAAC,WAAW;QAAE,OAAO;IAEzB,MAAM,KAAK,GAAG,WAAW,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,KAAK,CAAC,EAAE,CAAC,CAAC;IAErE,aAAa;SACV,IAAI,CAAC,MAAM,CAAC,EAAE;QACb,MAAM,KAAK,GAAG,KAAK,CAAC,UAAU,CAAC,GAAG,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;QAChD,OAAO,GAAG,CAAC,SAAS,CAAC,cAAc,CACjC,KAAK,EACL,GAAG,CAAC,GAAG,EACP,WAAW,CAAC,EAAE,EACd,KAAK,GAAG,CAAC,CACV,CAAC;IACJ,CAAC,CAAC;SACD,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAExB,OAAO,IAAI,EAAE,CAAC;AAChB,CAAC,CAAC","sourcesContent":["import type { Command } from '@blocksuite/block-std';\n\nimport { Slice } from '@blocksuite/store';\n\nexport const duplicateSelectedModelsCommand: Command<\n  'draftedModels' | 'selectedModels'\n> = (ctx, next) => {\n  const { std, draftedModels, selectedModels } = ctx;\n  if (!draftedModels || !selectedModels) return;\n\n  const model = selectedModels[selectedModels.length - 1];\n\n  const parentModel = std.doc.getParent(model.id);\n  if (!parentModel) return;\n\n  const index = parentModel.children.findIndex(x => x.id === model.id);\n\n  draftedModels\n    .then(models => {\n      const slice = Slice.fromModels(std.doc, models);\n      return std.clipboard.duplicateSlice(\n        slice,\n        std.doc,\n        parentModel.id,\n        index + 1\n      );\n    })\n    .catch(console.error);\n\n  return next();\n};\n\ndeclare global {\n  namespace BlockSuite {\n    interface Commands {\n      duplicateSelectedModels: typeof duplicateSelectedModelsCommand;\n    }\n  }\n}\n"]}