{"version":3,"file":"get-next-block.js","sourceRoot":"","sources":["../../../src/commands/block-crud/get-next-block.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,YAAY,EAAE,MAAM,0BAA0B,CAAC;AAExD,OAAO,EAAE,mBAAmB,EAAE,MAAM,sBAAsB,CAAC;AAE3D,SAAS,YAAY,CAAC,GAAmB,EAAE,IAAY;IACrD,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;IACtB,MAAM,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC;IAC5C,IAAI,CAAC,KAAK;QAAE,OAAO,IAAI,CAAC;IACxB,MAAM,SAAS,GAAG,mBAAmB,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;IACvD,IAAI,CAAC,SAAS;QAAE,OAAO,IAAI,CAAC;IAC5B,OAAO,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;AACrC,CAAC;AAED,MAAM,CAAC,MAAM,mBAAmB,GAM5B,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;IAChB,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,oBAAoB,CAAC;IAClD,YAAY,CACV,IAAI,EACJ,oGAAoG,CACrG,CAAC;IAEF,MAAM,SAAS,GAAG,YAAY,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IAE9C,IAAI,SAAS,EAAE,CAAC;QACd,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC;IACtB,CAAC;AACH,CAAC,CAAC","sourcesContent":["import type { BlockComponent, Command } from '@blocksuite/block-std';\n\nimport { assertExists } from '@blocksuite/global/utils';\n\nimport { getNextContentBlock } from '../../utils/index.js';\n\nfunction getNextBlock(std: BlockSuite.Std, path: string) {\n  const view = std.view;\n  const model = std.doc.getBlock(path)?.model;\n  if (!model) return null;\n  const nextModel = getNextContentBlock(std.host, model);\n  if (!nextModel) return null;\n  return view.getBlock(nextModel.id);\n}\n\nexport const getNextBlockCommand: Command<\n  'currentSelectionPath',\n  'nextBlock',\n  {\n    path?: string;\n  }\n> = (ctx, next) => {\n  const path = ctx.path ?? ctx.currentSelectionPath;\n  assertExists(\n    path,\n    '`path` is required, you need to pass it in args or ctx before adding this command to the pipeline.'\n  );\n\n  const nextBlock = getNextBlock(ctx.std, path);\n\n  if (nextBlock) {\n    next({ nextBlock });\n  }\n};\n\ndeclare global {\n  namespace BlockSuite {\n    interface CommandContext {\n      nextBlock?: BlockComponent;\n    }\n\n    interface Commands {\n      getNextBlock: typeof getNextBlockCommand;\n    }\n  }\n}\n"]}