{"version":3,"file":"get-prev-block.js","sourceRoot":"","sources":["../../../src/commands/block-crud/get-prev-block.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,YAAY,EAAE,MAAM,0BAA0B,CAAC;AAExD,OAAO,EAAE,mBAAmB,EAAE,MAAM,sBAAsB,CAAC;AAE3D,SAAS,YAAY,CAAC,GAAmB,EAAE,IAAY;IACrD,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;IAEtB,MAAM,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE,KAAK,CAAC;IAC5C,IAAI,CAAC,KAAK;QAAE,OAAO,IAAI,CAAC;IACxB,MAAM,SAAS,GAAG,mBAAmB,CAAC,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;IACvD,IAAI,CAAC,SAAS;QAAE,OAAO,IAAI,CAAC;IAC5B,OAAO,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;AACrC,CAAC;AAED,MAAM,CAAC,MAAM,mBAAmB,GAM5B,CAAC,GAAG,EAAE,IAAI,EAAE,EAAE;IAChB,MAAM,IAAI,GAAG,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,oBAAoB,CAAC;IAClD,YAAY,CACV,IAAI,EACJ,oGAAoG,CACrG,CAAC;IAEF,MAAM,SAAS,GAAG,YAAY,CAAC,GAAG,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;IAE9C,IAAI,SAAS,EAAE,CAAC;QACd,IAAI,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC;IACtB,CAAC;AACH,CAAC,CAAC","sourcesContent":["import type { BlockComponent, Command } from '@blocksuite/block-std';\n\nimport { assertExists } from '@blocksuite/global/utils';\n\nimport { getPrevContentBlock } from '../../utils/index.js';\n\nfunction getPrevBlock(std: BlockSuite.Std, path: string) {\n  const view = std.view;\n\n  const model = std.doc.getBlock(path)?.model;\n  if (!model) return null;\n  const prevModel = getPrevContentBlock(std.host, model);\n  if (!prevModel) return null;\n  return view.getBlock(prevModel.id);\n}\n\nexport const getPrevBlockCommand: Command<\n  'currentSelectionPath',\n  'prevBlock',\n  {\n    path?: string;\n  }\n> = (ctx, next) => {\n  const path = ctx.path ?? ctx.currentSelectionPath;\n  assertExists(\n    path,\n    '`path` is required, you need to pass it in args or ctx before adding this command to the pipeline.'\n  );\n\n  const prevBlock = getPrevBlock(ctx.std, path);\n\n  if (prevBlock) {\n    next({ prevBlock });\n  }\n};\n\ndeclare global {\n  namespace BlockSuite {\n    interface CommandContext {\n      prevBlock?: BlockComponent;\n    }\n\n    interface Commands {\n      getPrevBlock: typeof getPrevBlockCommand;\n    }\n  }\n}\n"]}