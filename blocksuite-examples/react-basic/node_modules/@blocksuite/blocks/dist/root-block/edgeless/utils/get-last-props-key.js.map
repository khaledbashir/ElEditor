{"version":3,"file":"get-last-props-key.js","sourceRoot":"","sources":["../../../../src/root-block/edgeless/utils/get-last-props-key.ts"],"names":[],"mappings":"AAKA,OAAO,EAAE,YAAY,EAAmB,MAAM,0BAA0B,CAAC;AACzE,OAAO,EAAE,eAAe,EAAE,MAAM,iCAAiC,CAAC;AAElE,MAAM,eAAe,GAAG,eAAe,CAAC;AAExC,MAAM,UAAU,eAAe,CAC7B,SAAuC,EACvC,UAA4C;IAE5C,IAAI,SAAS,KAAK,OAAO,EAAE,CAAC;QAC1B,MAAM,EAAE,SAAS,EAAE,MAAM,EAAE,GAAG,UAAwB,CAAC;QACvD,MAAM,SAAS,GAAG,YAAY,CAAC,SAAS,EAAE,MAAM,CAAC,CAAC;QAClD,OAAO,GAAG,SAAS,IAAI,SAAS,EAAE,CAAC;IACrC,CAAC;IAED,IAAI,cAAc,CAAC,SAAS,CAAC,EAAE,CAAC;QAC9B,OAAO,SAAS,CAAC;IACnB,CAAC;IAED,OAAO,IAAI,CAAC;AACd,CAAC;AAED,SAAS,cAAc,CAAC,GAAW;IACjC,OAAO,MAAM,CAAC,IAAI,CAAC,eAAe,CAAC,KAAK,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC;AAC1D,CAAC","sourcesContent":["import type {\n  LastProps,\n  LastPropsKey,\n} from '@blocksuite/affine-shared/services';\n\nimport { getShapeName, type ShapeProps } from '@blocksuite/affine-model';\nimport { NodePropsSchema } from '@blocksuite/affine-shared/utils';\n\nconst LastPropsSchema = NodePropsSchema;\n\nexport function getLastPropsKey(\n  modelType: BlockSuite.EdgelessModelKeys,\n  modelProps: Partial<LastProps[LastPropsKey]>\n): LastPropsKey | null {\n  if (modelType === 'shape') {\n    const { shapeType, radius } = modelProps as ShapeProps;\n    const shapeName = getShapeName(shapeType, radius);\n    return `${modelType}:${shapeName}`;\n  }\n\n  if (isLastPropsKey(modelType)) {\n    return modelType;\n  }\n\n  return null;\n}\n\nfunction isLastPropsKey(key: string): key is LastPropsKey {\n  return Object.keys(LastPropsSchema.shape).includes(key);\n}\n"]}