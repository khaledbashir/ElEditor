{"version":3,"file":"brush-menu.js","sourceRoot":"","sources":["../../../../../../src/root-block/edgeless/components/toolbar/brush/brush-menu.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,OAAO,EACL,cAAc,EACd,aAAa,GACd,MAAM,oCAAoC,CAAC;AAC5C,OAAO,EAAE,aAAa,EAAE,MAAM,0BAA0B,CAAC;AACzD,OAAO,EAAE,QAAQ,EAAE,MAAM,sBAAsB,CAAC;AAChD,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,UAAU,EAAE,MAAM,KAAK,CAAC;AAC5C,OAAO,EAAE,QAAQ,EAAE,MAAM,mBAAmB,CAAC;AAI7C,OAAO,EAEL,sBAAsB,GACvB,MAAM,4BAA4B,CAAC;AACpC,OAAO,EAAE,wBAAwB,EAAE,MAAM,yBAAyB,CAAC;IAEtD,iBAAiB;sBAAS,wBAAwB,CAC7D,aAAa,CAAC,UAAU,CAAC,CAC1B;;;;iBAFY,iBAAkB,SAAQ,WAEtC;;;oCA0DE,QAAQ,CAAC,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC;YAC/B,6KAAS,QAAQ,6BAAR,QAAQ,2FAA4C;;;iBA1D7C,WAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;GAgB3B,AAhBqB,CAgBpB;QAaO,MAAM;YACb,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,KAAK,CAAC;YACzD,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG;iBAC5B,GAAG,CAAC,aAAa,CAAC;iBAClB,aAAa,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,EAAE,sBAAsB,CAAC,KAAK,CAAC,CAAC,CAAC;YAE1E,OAAO,IAAI,CAAA;;;;4BAIa,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,SAAS;sBAClC,CAAC,CAAiB,EAAE,EAAE,CAC9B,IAAI,CAAC,QAAQ,CAAC,EAAE,SAAS,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC;;;oCAGhB,IAAI;;qBAEnB,KAAK;8BACI,CAAC,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,cAAc,CAAC,OAAO,CACzD,qBAAqB,CACtB;sBACS,CAAC,CAAa,EAAE,EAAE,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE,KAAK,EAAE,CAAC,CAAC,MAAM,EAAE,CAAC;;;;KAItE,CAAC;QACJ,CAAC;QAGD,2BAA6D;QAA7D,IAAS,QAAQ,8CAA4C;QAA7D,IAAS,QAAQ,oDAA4C;;;YAxCrD,YAAO,GAAG,QAAQ,CAAC,GAAG,EAAE;gBAC9B,MAAM,EAAE,KAAK,EAAE,SAAS,EAAE,GACxB,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,UAAU,CAAC,KAAK,CAAC,KAAK,CAAC;gBAC/D,OAAO;oBACL,KAAK;oBACL,SAAS;iBACV,CAAC;YACJ,CAAC,CAAC,CAAC;YAEH,SAAI,GAAoC,OAAO,CAAC;YA+BvC,0FAAoD;;;;;SA7DlD,iBAAiB","sourcesContent":["import type { GfxToolsFullOptionValue } from '@blocksuite/block-std/gfx';\n\nimport {\n  EditPropsStore,\n  ThemeProvider,\n} from '@blocksuite/affine-shared/services';\nimport { SignalWatcher } from '@blocksuite/global/utils';\nimport { computed } from '@preact/signals-core';\nimport { css, html, LitElement } from 'lit';\nimport { property } from 'lit/decorators.js';\n\nimport type { LineWidthEvent } from '../../panel/line-width-panel.js';\n\nimport {\n  type ColorEvent,\n  GET_DEFAULT_LINE_COLOR,\n} from '../../panel/color-panel.js';\nimport { EdgelessToolbarToolMixin } from '../mixins/tool.mixin.js';\n\nexport class EdgelessBrushMenu extends EdgelessToolbarToolMixin(\n  SignalWatcher(LitElement)\n) {\n  static override styles = css`\n    :host {\n      display: flex;\n      position: absolute;\n      z-index: -1;\n    }\n\n    .menu-content {\n      display: flex;\n      align-items: center;\n    }\n\n    menu-divider {\n      height: 24px;\n      margin: 0 9px;\n    }\n  `;\n\n  private _props$ = computed(() => {\n    const { color, lineWidth } =\n      this.edgeless.std.get(EditPropsStore).lastProps$.value.brush;\n    return {\n      color,\n      lineWidth,\n    };\n  });\n\n  type: GfxToolsFullOptionValue['type'] = 'brush';\n\n  override render() {\n    const theme = this.edgeless.std.get(ThemeProvider).theme;\n    const color = this.edgeless.std\n      .get(ThemeProvider)\n      .getColorValue(this._props$.value.color, GET_DEFAULT_LINE_COLOR(theme));\n\n    return html`\n      <edgeless-slide-menu>\n        <div class=\"menu-content\">\n          <edgeless-line-width-panel\n            .selectedSize=${this._props$.value.lineWidth}\n            @select=${(e: LineWidthEvent) =>\n              this.onChange({ lineWidth: e.detail })}\n          >\n          </edgeless-line-width-panel>\n          <menu-divider .vertical=${true}></menu-divider>\n          <edgeless-one-row-color-panel\n            .value=${color}\n            .hasTransparent=${!this.edgeless.doc.awarenessStore.getFlag(\n              'enable_color_picker'\n            )}\n            @select=${(e: ColorEvent) => this.onChange({ color: e.detail })}\n          ></edgeless-one-row-color-panel>\n        </div>\n      </edgeless-slide-menu>\n    `;\n  }\n\n  @property({ attribute: false })\n  accessor onChange!: (props: Record<string, unknown>) => void;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'edgeless-brush-menu': EdgelessBrushMenu;\n  }\n}\n"]}