{"version":3,"file":"config.js","sourceRoot":"","sources":["../../../../src/root-block/widgets/keyboard-toolbar/config.ts"],"names":[],"mappings":"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","sourcesContent":["import type { FrameBlockModel } from '@blocksuite/affine-model';\nimport type { AffineTextAttributes } from '@blocksuite/affine-shared/types';\nimport type { BlockStdScope } from '@blocksuite/block-std';\nimport type { TemplateResult } from 'lit';\n\nimport {\n  getInlineEditorByModel,\n  insertContent,\n  REFERENCE_NODE,\n} from '@blocksuite/affine-components/rich-text';\nimport { toast } from '@blocksuite/affine-components/toast';\nimport {\n  createDefaultDoc,\n  openFileOrFiles,\n} from '@blocksuite/affine-shared/utils';\nimport { viewPresets } from '@blocksuite/data-view/view-presets';\nimport { assertType } from '@blocksuite/global/utils';\nimport {\n  AttachmentIcon,\n  BoldIcon,\n  BulletedListIcon,\n  CheckBoxCheckLinearIcon,\n  CloseIcon,\n  CodeBlockIcon,\n  CodeIcon,\n  CollapseTabIcon,\n  CopyIcon,\n  DatabaseKanbanViewIcon,\n  DatabaseTableViewIcon,\n  DeleteIcon,\n  DividerIcon,\n  DuplicateIcon,\n  FontIcon,\n  FrameIcon,\n  GithubIcon,\n  GroupIcon,\n  ImageIcon,\n  ItalicIcon,\n  LinkedPageIcon,\n  LinkIcon,\n  LoomLogoIcon,\n  NewPageIcon,\n  NowIcon,\n  NumberedListIcon,\n  PlusIcon,\n  QuoteIcon,\n  RedoIcon,\n  RightTabIcon,\n  StrikeThroughIcon,\n  TeXIcon,\n  TextIcon,\n  TodayIcon,\n  TomorrowIcon,\n  UnderLineIcon,\n  UndoIcon,\n  YesterdayIcon,\n  YoutubeDuotoneIcon,\n} from '@blocksuite/icons/lit';\nimport { cssVarV2 } from '@toeverything/theme/v2';\n\nimport type { PageRootBlockComponent } from '../../page/page-root-block.js';\nimport type { AffineLinkedDocWidget } from '../linked-doc/index.js';\n\nimport { toggleEmbedCardCreateModal } from '../../../_common/components/embed-card/modal/embed-card-create-modal.js';\nimport { addSiblingAttachmentBlocks } from '../../../attachment-block/utils.js';\nimport { getSurfaceBlock } from '../../../surface-ref-block/utils.js';\nimport { formatDate, formatTime } from '../../utils/misc.js';\nimport {\n  FigmaDuotoneIcon,\n  HeadingIcon,\n  HighLightDuotoneIcon,\n  TextBackgroundDuotoneIcon,\n  TextColorIcon,\n} from './icons.js';\n\nexport type KeyboardToolbarConfig = {\n  items: KeyboardToolbarItem[];\n  /**\n   * @description Whether to use the screen height as the keyboard height when the virtual keyboard API is not supported.\n   * It is useful when the app is running in a webview and the keyboard is not overlaid on the content.\n   * @default false\n   */\n  useScreenHeight?: boolean;\n};\n\nexport type KeyboardToolbarItem =\n  | KeyboardToolbarActionItem\n  | KeyboardSubToolbarConfig\n  | KeyboardToolPanelConfig;\n\nexport type KeyboardIconType =\n  | TemplateResult\n  | ((ctx: KeyboardToolbarContext) => TemplateResult);\n\nexport type KeyboardToolbarActionItem = {\n  name: string;\n  icon: KeyboardIconType;\n  background?: string | ((ctx: KeyboardToolbarContext) => string | undefined);\n  /**\n   * @default true\n   * @description Whether to show the item in the toolbar.\n   */\n  showWhen?: (ctx: KeyboardToolbarContext) => boolean;\n  /**\n   * @default false\n   * @description Whether to set the item as disabled status.\n   */\n  disableWhen?: (ctx: KeyboardToolbarContext) => boolean;\n  /**\n   * @description The action to be executed when the item is clicked.\n   */\n  action?: (ctx: KeyboardToolbarContext) => void | Promise<void>;\n};\n\nexport type KeyboardSubToolbarConfig = {\n  icon: KeyboardIconType;\n  items: KeyboardToolbarItem[];\n};\n\nexport type KeyboardToolbarContext = {\n  std: BlockStdScope;\n  rootComponent: PageRootBlockComponent;\n  /**\n   * Close tool bar, and blur the focus if blur is true, default is false\n   */\n  closeToolbar: (blur?: boolean) => void;\n  /**\n   * Close current tool panel and show virtual keyboard\n   */\n  closeToolPanel: () => void;\n};\n\nexport type KeyboardToolPanelConfig = {\n  icon: KeyboardIconType;\n  activeIcon?: KeyboardIconType;\n  activeBackground?: string;\n  groups: (KeyboardToolPanelGroup | DynamicKeyboardToolPanelGroup)[];\n};\n\nexport type KeyboardToolPanelGroup = {\n  name: string;\n  items: KeyboardToolbarActionItem[];\n};\n\nexport type DynamicKeyboardToolPanelGroup = (\n  ctx: KeyboardToolbarContext\n) => KeyboardToolPanelGroup | null;\n\nconst textToolActionItems: KeyboardToolbarActionItem[] = [\n  {\n    name: 'Text',\n    icon: TextIcon(),\n    showWhen: ({ std }) =>\n      std.doc.schema.flavourSchemaMap.has('affine:paragraph'),\n    action: ({ std }) => {\n      std.command.exec('updateBlockType', {\n        flavour: 'affine:paragraph',\n        props: { type: 'text' },\n      });\n    },\n  },\n  ...([1, 2, 3, 4, 5, 6] as const).map(i => ({\n    name: `Heading ${i}`,\n    icon: HeadingIcon(i),\n    showWhen: ({ std }: KeyboardToolbarContext) =>\n      std.doc.schema.flavourSchemaMap.has('affine:paragraph'),\n    action: ({ std }: KeyboardToolbarContext) => {\n      std.command.exec('updateBlockType', {\n        flavour: 'affine:paragraph',\n        props: { type: `h${i}` },\n      });\n    },\n  })),\n  {\n    name: 'CodeBlock',\n    showWhen: ({ std }) => std.doc.schema.flavourSchemaMap.has('affine:code'),\n    icon: CodeBlockIcon(),\n    action: ({ std }) => {\n      std.command.exec('updateBlockType', {\n        flavour: 'affine:code',\n      });\n    },\n  },\n  {\n    name: 'Quote',\n    showWhen: ({ std }) =>\n      std.doc.schema.flavourSchemaMap.has('affine:paragraph'),\n    icon: QuoteIcon(),\n    action: ({ std }) => {\n      std.command.exec('updateBlockType', {\n        flavour: 'affine:paragraph',\n        props: { type: 'quote' },\n      });\n    },\n  },\n  {\n    name: 'Divider',\n    icon: DividerIcon(),\n    showWhen: ({ std }) =>\n      std.doc.schema.flavourSchemaMap.has('affine:divider'),\n    action: ({ std }) => {\n      std.command.exec('updateBlockType', {\n        flavour: 'affine:divider',\n        props: { type: 'divider' },\n      });\n    },\n  },\n  {\n    name: 'Inline equation',\n    icon: TeXIcon(),\n    showWhen: ({ std }) =>\n      std.doc.schema.flavourSchemaMap.has('affine:paragraph'),\n    action: ({ std }) => {\n      std.command.chain().getTextSelection().insertInlineLatex().run();\n    },\n  },\n];\n\nconst listToolActionItems: KeyboardToolbarActionItem[] = [\n  {\n    name: 'BulletedList',\n    icon: BulletedListIcon(),\n    showWhen: ({ std }) => std.doc.schema.flavourSchemaMap.has('affine:list'),\n    action: ({ std }) => {\n      std.command.exec('updateBlockType', {\n        flavour: 'affine:list',\n        props: {\n          type: 'bulleted',\n        },\n      });\n    },\n  },\n  {\n    name: 'NumberedList',\n    icon: NumberedListIcon(),\n    showWhen: ({ std }) => std.doc.schema.flavourSchemaMap.has('affine:list'),\n    action: ({ std }) => {\n      std.command.exec('updateBlockType', {\n        flavour: 'affine:list',\n        props: {\n          type: 'numbered',\n        },\n      });\n    },\n  },\n  {\n    name: 'CheckBox',\n    icon: CheckBoxCheckLinearIcon(),\n    showWhen: ({ std }) => std.doc.schema.flavourSchemaMap.has('affine:list'),\n    action: ({ std }) => {\n      std.command.exec('updateBlockType', {\n        flavour: 'affine:list',\n        props: {\n          type: 'todo',\n        },\n      });\n    },\n  },\n];\n\nconst pageToolGroup: KeyboardToolPanelGroup = {\n  name: 'Page',\n  items: [\n    {\n      name: 'NewPage',\n      icon: NewPageIcon(),\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:embed-linked-doc'),\n      action: ({ std }) => {\n        std.command\n          .chain()\n          .getSelectedModels()\n          .inline(({ selectedModels }) => {\n            const newDoc = createDefaultDoc(std.doc.collection);\n            if (!selectedModels?.length) return;\n            insertContent(std.host, selectedModels[0], REFERENCE_NODE, {\n              reference: {\n                type: 'LinkedPage',\n                pageId: newDoc.id,\n              },\n            });\n          })\n          .run();\n      },\n    },\n    {\n      name: 'LinkedPage',\n      icon: LinkedPageIcon(),\n      showWhen: ({ std, rootComponent }) => {\n        const linkedDocWidget = std.view.getWidget(\n          'affine-linked-doc-widget',\n          rootComponent.model.id\n        );\n        if (!linkedDocWidget) return false;\n\n        return std.doc.schema.flavourSchemaMap.has('affine:embed-linked-doc');\n      },\n      action: ({ rootComponent, closeToolPanel }) => {\n        const { std } = rootComponent;\n\n        const linkedDocWidget = std.view.getWidget(\n          'affine-linked-doc-widget',\n          rootComponent.model.id\n        );\n        if (!linkedDocWidget) return;\n        assertType<AffineLinkedDocWidget>(linkedDocWidget);\n\n        const triggerKey = linkedDocWidget.config.triggerKeys[0];\n\n        std.command\n          .chain()\n          .getSelectedModels()\n          .inline(ctx => {\n            const { selectedModels } = ctx;\n            if (!selectedModels?.length) return;\n\n            const currentModel = selectedModels[0];\n            insertContent(std.host, currentModel, triggerKey);\n\n            const inlineEditor = getInlineEditorByModel(std.host, currentModel);\n            // Wait for range to be updated\n            inlineEditor?.slots.inlineRangeSync.once(() => {\n              linkedDocWidget.show('mobile');\n              closeToolPanel();\n            });\n          })\n          .run();\n      },\n    },\n  ],\n};\n\nconst contentMediaToolGroup: KeyboardToolPanelGroup = {\n  name: 'Content & Media',\n  items: [\n    {\n      name: 'Image',\n      icon: ImageIcon(),\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:image'),\n      action: ({ std }) => {\n        std.command\n          .chain()\n          .getSelectedModels()\n          .insertImages({ removeEmptyLine: true })\n          .run();\n      },\n    },\n    {\n      name: 'Link',\n      icon: LinkIcon(),\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:bookmark'),\n      action: async ({ std }) => {\n        const { selectedModels } = std.command.exec('getSelectedModels');\n        const model = selectedModels?.[0];\n        if (!model) return;\n\n        const parentModel = std.doc.getParent(model);\n        if (!parentModel) return;\n\n        const index = parentModel.children.indexOf(model) + 1;\n        await toggleEmbedCardCreateModal(\n          std.host,\n          'Links',\n          'The added link will be displayed as a card view.',\n          { mode: 'page', parentModel, index }\n        );\n        if (model.text?.length === 0) {\n          std.doc.deleteBlock(model);\n        }\n      },\n    },\n    {\n      name: 'Attachment',\n      icon: AttachmentIcon(),\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:attachment'),\n      action: async ({ std }) => {\n        const { selectedModels } = std.command.exec('getSelectedModels');\n        const model = selectedModels?.[0];\n        if (!model) return;\n\n        const file = await openFileOrFiles();\n        if (!file) return;\n\n        const attachmentService = std.getService('affine:attachment');\n        if (!attachmentService) return;\n        const maxFileSize = attachmentService.maxFileSize;\n\n        await addSiblingAttachmentBlocks(std.host, [file], maxFileSize, model);\n        if (model.text?.length === 0) {\n          std.doc.deleteBlock(model);\n        }\n      },\n    },\n    {\n      name: 'Youtube',\n      icon: YoutubeDuotoneIcon({\n        style: `color: white`,\n      }),\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:embed-youtube'),\n      action: async ({ std }) => {\n        const { selectedModels } = std.command.exec('getSelectedModels');\n        const model = selectedModels?.[0];\n        if (!model) return;\n\n        const parentModel = std.doc.getParent(model);\n        if (!parentModel) return;\n\n        const index = parentModel.children.indexOf(model) + 1;\n        await toggleEmbedCardCreateModal(\n          std.host,\n          'YouTube',\n          'The added YouTube video link will be displayed as an embed view.',\n          { mode: 'page', parentModel, index }\n        );\n        if (model.text?.length === 0) {\n          std.doc.deleteBlock(model);\n        }\n      },\n    },\n    {\n      name: 'Github',\n      icon: GithubIcon({ style: `color: black` }),\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:embed-github'),\n      action: async ({ std }) => {\n        const { selectedModels } = std.command.exec('getSelectedModels');\n        const model = selectedModels?.[0];\n        if (!model) return;\n\n        const parentModel = std.doc.getParent(model);\n        if (!parentModel) return;\n\n        const index = parentModel.children.indexOf(model) + 1;\n        await toggleEmbedCardCreateModal(\n          std.host,\n          'GitHub',\n          'The added GitHub issue or pull request link will be displayed as a card view.',\n          { mode: 'page', parentModel, index }\n        );\n        if (model.text?.length === 0) {\n          std.doc.deleteBlock(model);\n        }\n      },\n    },\n    {\n      name: 'Figma',\n      icon: FigmaDuotoneIcon,\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:embed-figma'),\n      action: async ({ std }) => {\n        const { selectedModels } = std.command.exec('getSelectedModels');\n        const model = selectedModels?.[0];\n        if (!model) return;\n\n        const parentModel = std.doc.getParent(model);\n        if (!parentModel) {\n          return;\n        }\n        const index = parentModel.children.indexOf(model) + 1;\n        await toggleEmbedCardCreateModal(\n          std.host,\n          'Figma',\n          'The added Figma link will be displayed as an embed view.',\n          { mode: 'page', parentModel, index }\n        );\n        if (model.text?.length === 0) {\n          std.doc.deleteBlock(model);\n        }\n      },\n    },\n    {\n      name: 'Loom',\n      icon: LoomLogoIcon({ style: `color: #625DF5` }),\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:embed-loom'),\n      action: async ({ std }) => {\n        const { selectedModels } = std.command.exec('getSelectedModels');\n        const model = selectedModels?.[0];\n        if (!model) return;\n\n        const parentModel = std.doc.getParent(model);\n        if (!parentModel) return;\n\n        const index = parentModel.children.indexOf(model) + 1;\n        await toggleEmbedCardCreateModal(\n          std.host,\n          'Loom',\n          'The added Loom video link will be displayed as an embed view.',\n          { mode: 'page', parentModel, index }\n        );\n        if (model.text?.length === 0) {\n          std.doc.deleteBlock(model);\n        }\n      },\n    },\n    {\n      name: 'Equation',\n      icon: TeXIcon(),\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:latex'),\n      action: ({ std }) => {\n        std.command\n          .chain()\n          .getSelectedModels()\n          .insertLatexBlock({\n            place: 'after',\n            removeEmptyLine: true,\n          })\n          .run();\n      },\n    },\n  ],\n};\n\nconst documentGroupFrameToolGroup: DynamicKeyboardToolPanelGroup = ({\n  std,\n}) => {\n  const { doc } = std;\n\n  const frameModels = doc\n    .getBlocksByFlavour('affine:frame')\n    .map(block => block.model) as FrameBlockModel[];\n\n  const frameItems = frameModels.map<KeyboardToolbarActionItem>(frameModel => ({\n    name: 'Frame: ' + frameModel.title.toString(),\n    icon: FrameIcon(),\n    action: ({ std }) => {\n      std.command\n        .chain()\n        .getSelectedModels()\n        .insertSurfaceRefBlock({\n          reference: frameModel.id,\n          place: 'after',\n          removeEmptyLine: true,\n        })\n        .run();\n    },\n  }));\n\n  const surfaceModel = getSurfaceBlock(doc);\n\n  const groupElements = surfaceModel\n    ? surfaceModel.getElementsByType('group')\n    : [];\n\n  const groupItems = groupElements.map<KeyboardToolbarActionItem>(group => ({\n    name: 'Group: ' + group.title.toString(),\n    icon: GroupIcon(),\n    action: ({ std }) => {\n      std.command\n        .chain()\n        .getSelectedModels()\n        .insertSurfaceRefBlock({\n          reference: group.id,\n          place: 'after',\n          removeEmptyLine: true,\n        })\n        .run();\n    },\n  }));\n\n  const items = [...frameItems, ...groupItems];\n\n  if (items.length === 0) return null;\n\n  return {\n    name: 'Document Group&Frame',\n    items,\n  };\n};\n\nconst dateToolGroup: KeyboardToolPanelGroup = {\n  name: 'Date',\n  items: [\n    {\n      name: 'Today',\n      icon: TodayIcon(),\n      action: ({ std }) => {\n        const { selectedModels } = std.command.exec('getSelectedModels');\n        const model = selectedModels?.[0];\n        if (!model) return;\n\n        insertContent(std.host, model, formatDate(new Date()));\n      },\n    },\n    {\n      name: 'Tomorrow',\n      icon: TomorrowIcon(),\n      action: ({ std }) => {\n        const { selectedModels } = std.command.exec('getSelectedModels');\n        const model = selectedModels?.[0];\n        if (!model) return;\n\n        const tomorrow = new Date();\n        tomorrow.setDate(tomorrow.getDate() + 1);\n        insertContent(std.host, model, formatDate(tomorrow));\n      },\n    },\n    {\n      name: 'Yesterday',\n      icon: YesterdayIcon(),\n      action: ({ std }) => {\n        const { selectedModels } = std.command.exec('getSelectedModels');\n        const model = selectedModels?.[0];\n        if (!model) return;\n\n        const yesterday = new Date();\n        yesterday.setDate(yesterday.getDate() - 1);\n        insertContent(std.host, model, formatDate(yesterday));\n      },\n    },\n    {\n      name: 'Now',\n      icon: NowIcon(),\n      action: ({ std }) => {\n        const { selectedModels } = std.command.exec('getSelectedModels');\n        const model = selectedModels?.[0];\n        if (!model) return;\n\n        insertContent(std.host, model, formatTime(new Date()));\n      },\n    },\n  ],\n};\n\nconst databaseToolGroup: KeyboardToolPanelGroup = {\n  name: 'Database',\n  items: [\n    {\n      name: 'Table view',\n      icon: DatabaseTableViewIcon(),\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:database'),\n      action: ({ std }) => {\n        std.command\n          .chain()\n          .getSelectedModels()\n          .insertDatabaseBlock({\n            viewType: viewPresets.tableViewMeta.type,\n            place: 'after',\n            removeEmptyLine: true,\n          })\n          .run();\n      },\n    },\n    {\n      name: 'Kanban view',\n      icon: DatabaseKanbanViewIcon(),\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:database'),\n      action: ({ std }) => {\n        std.command\n          .chain()\n          .getSelectedModels()\n          .insertDatabaseBlock({\n            viewType: viewPresets.kanbanViewMeta.type,\n            place: 'after',\n            removeEmptyLine: true,\n          })\n          .run();\n      },\n    },\n  ],\n};\n\nconst moreToolPanel: KeyboardToolPanelConfig = {\n  icon: PlusIcon(),\n  activeIcon: CloseIcon({\n    style: `color: ${cssVarV2('icon/activated')}`,\n  }),\n  activeBackground: cssVarV2('edgeless/selection/selectionMarqueeBackground'),\n  groups: [\n    { name: 'Basic', items: textToolActionItems },\n    { name: 'List', items: listToolActionItems },\n    pageToolGroup,\n    contentMediaToolGroup,\n    documentGroupFrameToolGroup,\n    dateToolGroup,\n    databaseToolGroup,\n  ],\n};\n\nconst textToolPanel: KeyboardToolPanelConfig = {\n  icon: TextIcon(),\n  groups: [\n    {\n      name: 'Turn into',\n      items: textToolActionItems,\n    },\n  ],\n};\n\nconst textStyleToolItems: KeyboardToolbarItem[] = [\n  {\n    name: 'Bold',\n    icon: BoldIcon(),\n    background: ({ std }) => {\n      const { textStyle } = std.command.exec('getTextStyle');\n      return textStyle?.bold ? '#00000012' : '';\n    },\n    action: ({ std }) => {\n      std.command.exec('toggleBold');\n    },\n  },\n  {\n    name: 'Italic',\n    icon: ItalicIcon(),\n    background: ({ std }) => {\n      const { textStyle } = std.command.exec('getTextStyle');\n      return textStyle?.italic ? '#00000012' : '';\n    },\n    action: ({ std }) => {\n      std.command.exec('toggleItalic');\n    },\n  },\n  {\n    name: 'UnderLine',\n    icon: UnderLineIcon(),\n    background: ({ std }) => {\n      const { textStyle } = std.command.exec('getTextStyle');\n      return textStyle?.underline ? '#00000012' : '';\n    },\n    action: ({ std }) => {\n      std.command.exec('toggleUnderline');\n    },\n  },\n  {\n    name: 'StrikeThrough',\n    icon: StrikeThroughIcon(),\n    background: ({ std }) => {\n      const { textStyle } = std.command.exec('getTextStyle');\n      return textStyle?.strike ? '#00000012' : '';\n    },\n    action: ({ std }) => {\n      std.command.exec('toggleStrike');\n    },\n  },\n  {\n    name: 'Code',\n    icon: CodeIcon(),\n    background: ({ std }) => {\n      const { textStyle } = std.command.exec('getTextStyle');\n      return textStyle?.code ? '#00000012' : '';\n    },\n    action: ({ std }) => {\n      std.command.exec('toggleCode');\n    },\n  },\n  {\n    name: 'Link',\n    icon: LinkIcon(),\n    background: ({ std }) => {\n      const { textStyle } = std.command.exec('getTextStyle');\n      return textStyle?.link ? '#00000012' : '';\n    },\n    action: ({ std }) => {\n      std.command.exec('toggleLink');\n    },\n  },\n];\n\nconst highlightToolPanel: KeyboardToolPanelConfig = {\n  icon: ({ std }) => {\n    const { textStyle } = std.command.exec('getTextStyle');\n    if (textStyle?.color) {\n      return HighLightDuotoneIcon(textStyle.color);\n    } else {\n      return HighLightDuotoneIcon(cssVarV2('icon/primary'));\n    }\n  },\n  groups: [\n    {\n      name: 'Color',\n      items: [\n        {\n          name: 'Default Color',\n          icon: TextColorIcon(cssVarV2('text/highlight/fg/orange')),\n        },\n        ...(\n          [\n            'red',\n            'orange',\n            'yellow',\n            'green',\n            'teal',\n            'blue',\n            'purple',\n            'grey',\n          ] as const\n        ).map<KeyboardToolbarActionItem>(color => ({\n          name: color.charAt(0).toUpperCase() + color.slice(1),\n          icon: TextColorIcon(cssVarV2(`text/highlight/fg/${color}`)),\n          action: ({ std }) => {\n            const payload = {\n              styles: {\n                color: cssVarV2(`text/highlight/fg/${color}`),\n              } satisfies AffineTextAttributes,\n            };\n            std.command\n              .chain()\n              .try(chain => [\n                chain.getTextSelection().formatText(payload),\n                chain.getBlockSelections().formatBlock(payload),\n                chain.formatNative(payload),\n              ])\n              .run();\n          },\n        })),\n      ],\n    },\n    {\n      name: 'Background',\n      items: [\n        {\n          name: 'Default Color',\n          icon: TextBackgroundDuotoneIcon(cssVarV2('text/highlight/bg/orange')),\n        },\n        ...(\n          [\n            'red',\n            'orange',\n            'yellow',\n            'green',\n            'teal',\n            'blue',\n            'purple',\n            'grey',\n          ] as const\n        ).map<KeyboardToolbarActionItem>(color => ({\n          name: color.charAt(0).toUpperCase() + color.slice(1),\n          icon: TextBackgroundDuotoneIcon(\n            cssVarV2(`text/highlight/bg/${color}`)\n          ),\n          action: ({ std }) => {\n            const payload = {\n              styles: {\n                background: cssVarV2(`text/highlight/bg/${color}`),\n              } satisfies AffineTextAttributes,\n            };\n            std.command\n              .chain()\n              .try(chain => [\n                chain.getTextSelection().formatText(payload),\n                chain.getBlockSelections().formatBlock(payload),\n                chain.formatNative(payload),\n              ])\n              .run();\n          },\n        })),\n      ],\n    },\n  ],\n};\n\nconst textSubToolbarConfig: KeyboardSubToolbarConfig = {\n  icon: FontIcon(),\n  items: [\n    textToolPanel,\n    ...textStyleToolItems,\n    {\n      name: 'InlineTex',\n      icon: TeXIcon(),\n      action: ({ std }) => {\n        std.command.chain().getTextSelection().insertInlineLatex().run();\n      },\n    },\n    highlightToolPanel,\n  ],\n};\n\nexport const defaultKeyboardToolbarConfig: KeyboardToolbarConfig = {\n  items: [\n    moreToolPanel,\n    // TODO(@L-Sun): add ai function in AFFiNE side\n    // { icon: AiIcon(iconStyle) },\n    textSubToolbarConfig,\n    {\n      name: 'Image',\n      icon: ImageIcon(),\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:image'),\n      action: ({ std }) => {\n        std.command\n          .chain()\n          .getSelectedModels()\n          .insertImages({ removeEmptyLine: true })\n          .run();\n      },\n    },\n    {\n      name: 'Attachment',\n      icon: AttachmentIcon(),\n      showWhen: ({ std }) =>\n        std.doc.schema.flavourSchemaMap.has('affine:attachment'),\n      action: async ({ std }) => {\n        const { selectedModels } = std.command.exec('getSelectedModels');\n        const model = selectedModels?.[0];\n        if (!model) return;\n\n        const file = await openFileOrFiles();\n        if (!file) return;\n\n        const attachmentService = std.getService('affine:attachment');\n        if (!attachmentService) return;\n        const maxFileSize = attachmentService.maxFileSize;\n\n        await addSiblingAttachmentBlocks(std.host, [file], maxFileSize, model);\n        if (model.text?.length === 0) {\n          std.doc.deleteBlock(model);\n        }\n      },\n    },\n    {\n      name: 'Undo',\n      icon: UndoIcon(),\n      disableWhen: ({ std }) => !std.doc.canUndo,\n      action: ({ std }) => {\n        std.doc.undo();\n      },\n    },\n    {\n      name: 'Redo',\n      icon: RedoIcon(),\n      disableWhen: ({ std }) => !std.doc.canRedo,\n      action: ({ std }) => {\n        std.doc.redo();\n      },\n    },\n    {\n      name: 'RightTab',\n      icon: RightTabIcon(),\n      disableWhen: ({ std }) => {\n        const [success] = std.command\n          .chain()\n          .tryAll(chain => [chain.canIndentParagraph(), chain.canIndentList()])\n          .run();\n        return !success;\n      },\n      action: ({ std }) => {\n        std.command\n          .chain()\n          .tryAll(chain => [\n            chain.canIndentParagraph().indentParagraph(),\n            chain.canIndentList().indentList(),\n          ])\n          .run();\n      },\n    },\n    ...listToolActionItems,\n    ...textToolActionItems.filter(({ name }) => name === 'Divider'),\n    {\n      name: 'CollapseTab',\n      icon: CollapseTabIcon(),\n      disableWhen: ({ std }) => {\n        const [success] = std.command\n          .chain()\n          .tryAll(chain => [chain.canDedentParagraph(), chain.canDedentList()])\n          .run();\n        return !success;\n      },\n      action: ({ std }) => {\n        std.command\n          .chain()\n          .tryAll(chain => [\n            chain.canDedentParagraph().dedentParagraph(),\n            chain.canDedentList().dedentList(),\n          ])\n          .run();\n      },\n    },\n    {\n      name: 'Copy',\n      icon: CopyIcon(),\n      action: ({ std }) => {\n        std.command\n          .chain()\n          .getSelectedModels()\n          .with({\n            onCopy: () => {\n              toast(std.host, 'Copied to clipboard');\n            },\n          })\n          .draftSelectedModels()\n          .copySelectedModels()\n          .run();\n      },\n    },\n    {\n      name: 'Duplicate',\n      icon: DuplicateIcon(),\n      action: ({ std }) => {\n        std.command\n          .chain()\n          .getSelectedModels()\n          .draftSelectedModels()\n          .duplicateSelectedModels()\n          .run();\n      },\n    },\n    {\n      name: 'Delete',\n      icon: DeleteIcon(),\n      action: ({ std }) => {\n        std.command.chain().getSelectedModels().deleteSelectedModels().run();\n      },\n    },\n  ],\n  useScreenHeight: false,\n};\n"]}