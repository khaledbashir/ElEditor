{"version":3,"file":"keyboard-event-watcher.js","sourceRoot":"","sources":["../../../../../src/root-block/widgets/drag-handle/watchers/keyboard-event-watcher.ts"],"names":[],"mappings":"AAIA,MAAM,OAAO,oBAAoB;IAe/B,YAAqB,MAA8B;QAA9B,WAAM,GAAN,MAAM,CAAwB;QAd3C,qBAAgB,GAAmB,GAAG,CAAC,EAAE;YAC/C,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC;gBACtD,OAAO;YACT,CAAC;YAED,MAAM,KAAK,GAAG,GAAG,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;YACtC,MAAM,KAAK,GAAG,KAAK,CAAC,KAAsB,CAAC;YAC3C,KAAK,CAAC,cAAc,EAAE,CAAC;YACvB,KAAK,CAAC,eAAe,EAAE,CAAC;YAExB,MAAM,MAAM,GAAG,KAAK,CAAC,GAAG,KAAK,KAAK,IAAI,KAAK,CAAC,MAAM,CAAC;YACnD,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,KAAK,CAAC,OAAO,GAAG,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,KAAK,CAAC;QAC/D,CAAC,CAAC;IAEoD,CAAC;IAEvD,KAAK;QACH,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,aAAa,EAAE,GAAG,EAAE,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,EAAE,CAAC,CAAC;QACjE,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,SAAS,EAAE,IAAI,CAAC,gBAAgB,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;QAC5E,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,OAAO,EAAE,IAAI,CAAC,gBAAgB,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC,CAAC;IAC5E,CAAC;CACF","sourcesContent":["import type { UIEventHandler } from '@blocksuite/block-std';\n\nimport type { AffineDragHandleWidget } from '../drag-handle.js';\n\nexport class KeyboardEventWatcher {\n  private _keyboardHandler: UIEventHandler = ctx => {\n    if (!this.widget.dragging || !this.widget.dragPreview) {\n      return;\n    }\n\n    const state = ctx.get('defaultState');\n    const event = state.event as KeyboardEvent;\n    event.preventDefault();\n    event.stopPropagation();\n\n    const altKey = event.key === 'Alt' && event.altKey;\n    this.widget.dragPreview.style.opacity = altKey ? '1' : '0.5';\n  };\n\n  constructor(readonly widget: AffineDragHandleWidget) {}\n\n  watch() {\n    this.widget.handleEvent('beforeInput', () => this.widget.hide());\n    this.widget.handleEvent('keyDown', this._keyboardHandler, { global: true });\n    this.widget.handleEvent('keyUp', this._keyboardHandler, { global: true });\n  }\n}\n"]}