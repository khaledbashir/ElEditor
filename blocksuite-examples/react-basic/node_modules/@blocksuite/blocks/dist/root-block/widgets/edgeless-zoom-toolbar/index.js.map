{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../src/root-block/widgets/edgeless-zoom-toolbar/index.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEA,OAAO,EAAE,eAAe,EAAE,MAAM,uBAAuB,CAAC;AACxD,OAAO,EAAE,MAAM,EAAE,MAAM,sBAAsB,CAAC;AAC9C,OAAO,EAAE,GAAG,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,KAAK,CAAC;AACzC,OAAO,EAAE,KAAK,EAAE,MAAM,mBAAmB,CAAC;AAI1C,MAAM,CAAC,MAAM,mCAAmC,GAC9C,qCAAqC,CAAC;IAE3B,+BAA+B;sBAAS,eAAe;;;;iBAAvD,+BAAgC,SAAQ,WAGpD;;;iCAyEE,KAAK,EAAE;YACR,oKAAiB,KAAK,6BAAL,KAAK,qFAAS;;;iBAzEf,WAAM,GAAG,GAAG,CAAA;;;;;;;;;;;;;;;;;;;;;;;GAuB3B,CAAC;QAEF,IAAI,QAAQ;YACV,OAAO,IAAI,CAAC,KAAK,CAAC;QACpB,CAAC;QAEQ,iBAAiB;YACxB,KAAK,CAAC,iBAAiB,EAAE,CAAC;YAE1B,IAAI,CAAC,WAAW,CAAC,GAAG,CAClB,MAAM,CAAC,GAAG,EAAE;gBACV,MAAM,WAAW,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC;gBAElE,IAAI,WAAW,KAAK,gBAAgB,EAAE,CAAC;oBACrC,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;gBACrB,CAAC;gBACD,IAAI,CAAC,aAAa,EAAE,CAAC;YACvB,CAAC,CAAC,CACH,CAAC;QACJ,CAAC;QAEQ,YAAY;YACnB,MAAM,EACJ,WAAW,EACX,QAAQ,EAAE,EAAE,KAAK,EAAE,GACpB,GAAG,IAAI,CAAC;YAET,WAAW,CAAC,GAAG,CACb,KAAK,CAAC,uBAAuB,CAAC,EAAE,CAAC,CAAC,EAAE,WAAW,EAAE,EAAE,EAAE;gBACnD,IAAI,WAAW,KAAK,SAAS,EAAE,CAAC;oBAC9B,IAAI,CAAC,KAAK,GAAG,WAAW,CAAC;gBAC3B,CAAC;YACH,CAAC,CAAC,CACH,CAAC;QACJ,CAAC;QAEQ,MAAM;YACb,IAAI,IAAI,CAAC,KAAK,IAAI,CAAC,IAAI,CAAC,QAAQ,EAAE,CAAC;gBACjC,OAAO,OAAO,CAAC;YACjB,CAAC;YAED,OAAO,IAAI,CAAA;yCAC0B,IAAI,CAAC,QAAQ;;oBAElC,IAAI,CAAC,QAAQ;;KAE5B,CAAC;QACJ,CAAC;QAGD,uEAAyB,KAAK,EAAC;QAA/B,IAAiB,KAAK,2CAAS;QAA/B,IAAiB,KAAK,iDAAS;;;;;;;SA7EpB,+BAA+B","sourcesContent":["import type { RootBlockModel } from '@blocksuite/affine-model';\n\nimport { WidgetComponent } from '@blocksuite/block-std';\nimport { effect } from '@preact/signals-core';\nimport { css, html, nothing } from 'lit';\nimport { state } from 'lit/decorators.js';\n\nimport type { EdgelessRootBlockComponent } from '../../edgeless/edgeless-root-block.js';\n\nexport const AFFINE_EDGELESS_ZOOM_TOOLBAR_WIDGET =\n  'affine-edgeless-zoom-toolbar-widget';\n\nexport class AffineEdgelessZoomToolbarWidget extends WidgetComponent<\n  RootBlockModel,\n  EdgelessRootBlockComponent\n> {\n  static override styles = css`\n    :host {\n      position: absolute;\n      bottom: 20px;\n      left: 12px;\n      z-index: var(--affine-z-index-popover);\n      display: flex;\n      justify-content: center;\n      -webkit-user-select: none;\n      user-select: none;\n    }\n\n    @container viewport (width <= 1200px) {\n      edgeless-zoom-toolbar {\n        display: none;\n      }\n    }\n\n    @container viewport (width > 1200px) {\n      zoom-bar-toggle-button {\n        display: none;\n      }\n    }\n  `;\n\n  get edgeless() {\n    return this.block;\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n\n    this.disposables.add(\n      effect(() => {\n        const currentTool = this.edgeless.gfx.tool.currentToolName$.value;\n\n        if (currentTool !== 'frameNavigator') {\n          this._hide = false;\n        }\n        this.requestUpdate();\n      })\n    );\n  }\n\n  override firstUpdated() {\n    const {\n      disposables,\n      edgeless: { slots },\n    } = this;\n\n    disposables.add(\n      slots.navigatorSettingUpdated.on(({ hideToolbar }) => {\n        if (hideToolbar !== undefined) {\n          this._hide = hideToolbar;\n        }\n      })\n    );\n  }\n\n  override render() {\n    if (this._hide || !this.edgeless) {\n      return nothing;\n    }\n\n    return html`\n      <edgeless-zoom-toolbar .edgeless=${this.edgeless}></edgeless-zoom-toolbar>\n      <zoom-bar-toggle-button\n        .edgeless=${this.edgeless}\n      ></zoom-bar-toggle-button>\n    `;\n  }\n\n  @state()\n  private accessor _hide = false;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    [AFFINE_EDGELESS_ZOOM_TOOLBAR_WIDGET]: AffineEdgelessZoomToolbarWidget;\n  }\n}\n"]}