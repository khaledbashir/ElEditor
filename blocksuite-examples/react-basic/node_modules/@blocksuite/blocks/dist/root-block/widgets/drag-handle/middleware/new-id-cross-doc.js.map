{"version":3,"file":"new-id-cross-doc.js","sourceRoot":"","sources":["../../../../../src/root-block/widgets/drag-handle/middleware/new-id-cross-doc.ts"],"names":[],"mappings":"AAGA,MAAM,CAAC,MAAM,aAAa,GACxB,CAAC,GAAkB,EAAiB,EAAE,CACtC,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,EAAE,EAAE;IACxB,IAAI,QAAQ,GAAG,KAAK,CAAC;IACrB,KAAK,CAAC,YAAY,CAAC,EAAE,CAAC,OAAO,CAAC,EAAE;QAC9B,IAAI,OAAO,CAAC,IAAI,KAAK,OAAO,EAAE,CAAC;YAC7B,QAAQ,GAAG,OAAO,CAAC,QAAQ,CAAC,MAAM,KAAK,GAAG,CAAC,GAAG,CAAC,EAAE,CAAC;QACpD,CAAC;QACD,IAAI,OAAO,CAAC,IAAI,KAAK,OAAO,IAAI,CAAC,QAAQ,EAAE,CAAC;YAC1C,OAAO,CAAC,QAAQ,CAAC,EAAE,GAAG,UAAU,CAAC,WAAW,EAAE,CAAC;QACjD,CAAC;IACH,CAAC,CAAC,CAAC;AACL,CAAC,CAAC","sourcesContent":["import type { BlockStdScope } from '@blocksuite/block-std';\nimport type { JobMiddleware } from '@blocksuite/store';\n\nexport const newIdCrossDoc =\n  (std: BlockStdScope): JobMiddleware =>\n  ({ slots, collection }) => {\n    let samePage = false;\n    slots.beforeImport.on(payload => {\n      if (payload.type === 'slice') {\n        samePage = payload.snapshot.pageId === std.doc.id;\n      }\n      if (payload.type === 'block' && !samePage) {\n        payload.snapshot.id = collection.idGenerator();\n      }\n    });\n  };\n"]}