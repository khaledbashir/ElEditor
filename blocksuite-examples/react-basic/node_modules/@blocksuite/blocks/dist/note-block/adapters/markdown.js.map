{"version":3,"file":"markdown.js","sourceRoot":"","sources":["../../../src/note-block/adapters/markdown.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,eAAe,EAAE,eAAe,EAAE,MAAM,0BAA0B,CAAC;AAC5E,OAAO,EACL,6BAA6B,GAE9B,MAAM,oCAAoC,CAAC;AAE5C;;;;;;GAMG;AACH,MAAM,qCAAqC,GAAG,CAC5C,iBAAkC,EACL,EAAE,CAAC,CAAC;IACjC,OAAO,EAAE,eAAe,CAAC,KAAK,CAAC,OAAO;IACtC,OAAO,EAAE,GAAG,EAAE,CAAC,KAAK;IACpB,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,eAAe,CAAC,KAAK,CAAC,OAAO;IAChE,eAAe,EAAE,EAAE;IACnB,iBAAiB,EAAE;QACjB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE;YACpB,MAAM,IAAI,GAAG,CAAC,CAAC,IAAI,CAAC;YACpB,IAAI,IAAI,CAAC,KAAK,CAAC,WAAW,KAAK,iBAAiB,EAAE,CAAC;gBACjD,OAAO,CAAC,aAAa,CAAC,eAAe,EAAE,CAAC;YAC1C,CAAC;QACH,CAAC;KACF;CACF,CAAC,CAAC;AAEH,MAAM,CAAC,MAAM,kCAAkC,GAC7C,qCAAqC,CAAC,eAAe,CAAC,YAAY,CAAC,CAAC;AAEtE,MAAM,CAAC,MAAM,uCAAuC,GAClD,qCAAqC,CAAC,eAAe,CAAC,OAAO,CAAC,CAAC;AAEjE,MAAM,CAAC,MAAM,oCAAoC,GAC/C,6BAA6B,CAAC,kCAAkC,CAAC,CAAC;AAEpE,MAAM,CAAC,MAAM,yCAAyC,GACpD,6BAA6B,CAAC,uCAAuC,CAAC,CAAC","sourcesContent":["import { NoteBlockSchema, NoteDisplayMode } from '@blocksuite/affine-model';\nimport {\n  BlockMarkdownAdapterExtension,\n  type BlockMarkdownAdapterMatcher,\n} from '@blocksuite/affine-shared/adapters';\n\n/**\n * Create a markdown adapter matcher for note block.\n *\n * @param displayModeToSkip - The note with specific display mode to skip.\n * For example, the note with display mode `EdgelessOnly` should not be converted to markdown when current editor mode is `Doc`.\n * @returns The markdown adapter matcher.\n */\nconst createNoteBlockMarkdownAdapterMatcher = (\n  displayModeToSkip: NoteDisplayMode\n): BlockMarkdownAdapterMatcher => ({\n  flavour: NoteBlockSchema.model.flavour,\n  toMatch: () => false,\n  fromMatch: o => o.node.flavour === NoteBlockSchema.model.flavour,\n  toBlockSnapshot: {},\n  fromBlockSnapshot: {\n    enter: (o, context) => {\n      const node = o.node;\n      if (node.props.displayMode === displayModeToSkip) {\n        context.walkerContext.skipAllChildren();\n      }\n    },\n  },\n});\n\nexport const docNoteBlockMarkdownAdapterMatcher =\n  createNoteBlockMarkdownAdapterMatcher(NoteDisplayMode.EdgelessOnly);\n\nexport const edgelessNoteBlockMarkdownAdapterMatcher =\n  createNoteBlockMarkdownAdapterMatcher(NoteDisplayMode.DocOnly);\n\nexport const DocNoteBlockMarkdownAdapterExtension =\n  BlockMarkdownAdapterExtension(docNoteBlockMarkdownAdapterMatcher);\n\nexport const EdgelessNoteBlockMarkdownAdapterExtension =\n  BlockMarkdownAdapterExtension(edgelessNoteBlockMarkdownAdapterMatcher);\n"]}