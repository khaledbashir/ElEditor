{"version":3,"file":"markdown.js","sourceRoot":"","sources":["../../../src/divider-block/adapters/markdown.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,kBAAkB,EAAE,MAAM,0BAA0B,CAAC;AAC9D,OAAO,EACL,6BAA6B,GAG9B,MAAM,oCAAoC,CAAC;AAC5C,OAAO,EAAE,MAAM,EAAE,MAAM,mBAAmB,CAAC;AAE3C,MAAM,aAAa,GAAG,CAAC,IAAiB,EAAyB,EAAE,CACjE,IAAI,CAAC,IAAI,KAAK,eAAe,CAAC;AAEhC,MAAM,CAAC,MAAM,kCAAkC,GAAgC;IAC7E,OAAO,EAAE,kBAAkB,CAAC,KAAK,CAAC,OAAO;IACzC,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC,IAAI,CAAC;IACnC,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,kBAAkB,CAAC,KAAK,CAAC,OAAO;IACnE,eAAe,EAAE;QACf,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE;YACpB,MAAM,EAAE,aAAa,EAAE,GAAG,OAAO,CAAC;YAClC,aAAa;iBACV,QAAQ,CACP;gBACE,IAAI,EAAE,OAAO;gBACb,EAAE,EAAE,MAAM,EAAE;gBACZ,OAAO,EAAE,gBAAgB;gBACzB,KAAK,EAAE,EAAE;gBACT,QAAQ,EAAE,EAAE;aACb,EACD,UAAU,CACX;iBACA,SAAS,EAAE,CAAC;QACjB,CAAC;KACF;IACD,iBAAiB,EAAE;QACjB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE;YACpB,MAAM,EAAE,aAAa,EAAE,GAAG,OAAO,CAAC;YAClC,aAAa;iBACV,QAAQ,CACP;gBACE,IAAI,EAAE,eAAe;aACtB,EACD,UAAU,CACX;iBACA,SAAS,EAAE,CAAC;QACjB,CAAC;KACF;CACF,CAAC;AAEF,MAAM,CAAC,MAAM,oCAAoC,GAC/C,6BAA6B,CAAC,kCAAkC,CAAC,CAAC","sourcesContent":["import type { ThematicBreak } from 'mdast';\n\nimport { DividerBlockSchema } from '@blocksuite/affine-model';\nimport {\n  BlockMarkdownAdapterExtension,\n  type BlockMarkdownAdapterMatcher,\n  type MarkdownAST,\n} from '@blocksuite/affine-shared/adapters';\nimport { nanoid } from '@blocksuite/store';\n\nconst isDividerNode = (node: MarkdownAST): node is ThematicBreak =>\n  node.type === 'thematicBreak';\n\nexport const dividerBlockMarkdownAdapterMatcher: BlockMarkdownAdapterMatcher = {\n  flavour: DividerBlockSchema.model.flavour,\n  toMatch: o => isDividerNode(o.node),\n  fromMatch: o => o.node.flavour === DividerBlockSchema.model.flavour,\n  toBlockSnapshot: {\n    enter: (_, context) => {\n      const { walkerContext } = context;\n      walkerContext\n        .openNode(\n          {\n            type: 'block',\n            id: nanoid(),\n            flavour: 'affine:divider',\n            props: {},\n            children: [],\n          },\n          'children'\n        )\n        .closeNode();\n    },\n  },\n  fromBlockSnapshot: {\n    enter: (_, context) => {\n      const { walkerContext } = context;\n      walkerContext\n        .openNode(\n          {\n            type: 'thematicBreak',\n          },\n          'children'\n        )\n        .closeNode();\n    },\n  },\n};\n\nexport const DividerBlockMarkdownAdapterExtension =\n  BlockMarkdownAdapterExtension(dividerBlockMarkdownAdapterMatcher);\n"]}