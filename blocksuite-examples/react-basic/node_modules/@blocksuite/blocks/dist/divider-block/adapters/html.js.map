{"version":3,"file":"html.js","sourceRoot":"","sources":["../../../src/divider-block/adapters/html.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,kBAAkB,EAAE,MAAM,0BAA0B,CAAC;AAC9D,OAAO,EACL,yBAAyB,EAEzB,SAAS,GACV,MAAM,oCAAoC,CAAC;AAC5C,OAAO,EAAE,MAAM,EAAE,MAAM,mBAAmB,CAAC;AAE3C,MAAM,CAAC,MAAM,8BAA8B,GAA4B;IACrE,OAAO,EAAE,kBAAkB,CAAC,KAAK,CAAC,OAAO;IACzC,OAAO,EAAE,CAAC,CAAC,EAAE,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,IAAI;IACpE,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,kBAAkB,CAAC,KAAK,CAAC,OAAO;IACnE,eAAe,EAAE;QACf,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE;YACpB,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC;gBACjC,OAAO;YACT,CAAC;YACD,MAAM,EAAE,aAAa,EAAE,GAAG,OAAO,CAAC;YAClC,aAAa;iBACV,QAAQ,CACP;gBACE,IAAI,EAAE,OAAO;gBACb,EAAE,EAAE,MAAM,EAAE;gBACZ,OAAO,EAAE,gBAAgB;gBACzB,KAAK,EAAE,EAAE;gBACT,QAAQ,EAAE,EAAE;aACb,EACD,UAAU,CACX;iBACA,SAAS,EAAE,CAAC;QACjB,CAAC;KACF;IACD,iBAAiB,EAAE;QACjB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE;YACpB,MAAM,EAAE,aAAa,EAAE,GAAG,OAAO,CAAC;YAClC,aAAa;iBACV,QAAQ,CACP;gBACE,IAAI,EAAE,SAAS;gBACf,OAAO,EAAE,IAAI;gBACb,UAAU,EAAE,EAAE;gBACd,QAAQ,EAAE,EAAE;aACb,EACD,UAAU,CACX;iBACA,SAAS,EAAE,CAAC;QACjB,CAAC;KACF;CACF,CAAC;AAEF,MAAM,CAAC,MAAM,gCAAgC,GAAG,yBAAyB,CACvE,8BAA8B,CAC/B,CAAC","sourcesContent":["import { DividerBlockSchema } from '@blocksuite/affine-model';\nimport {\n  BlockHtmlAdapterExtension,\n  type BlockHtmlAdapterMatcher,\n  HastUtils,\n} from '@blocksuite/affine-shared/adapters';\nimport { nanoid } from '@blocksuite/store';\n\nexport const dividerBlockHtmlAdapterMatcher: BlockHtmlAdapterMatcher = {\n  flavour: DividerBlockSchema.model.flavour,\n  toMatch: o => HastUtils.isElement(o.node) && o.node.tagName === 'hr',\n  fromMatch: o => o.node.flavour === DividerBlockSchema.model.flavour,\n  toBlockSnapshot: {\n    enter: (o, context) => {\n      if (!HastUtils.isElement(o.node)) {\n        return;\n      }\n      const { walkerContext } = context;\n      walkerContext\n        .openNode(\n          {\n            type: 'block',\n            id: nanoid(),\n            flavour: 'affine:divider',\n            props: {},\n            children: [],\n          },\n          'children'\n        )\n        .closeNode();\n    },\n  },\n  fromBlockSnapshot: {\n    enter: (_, context) => {\n      const { walkerContext } = context;\n      walkerContext\n        .openNode(\n          {\n            type: 'element',\n            tagName: 'hr',\n            properties: {},\n            children: [],\n          },\n          'children'\n        )\n        .closeNode();\n    },\n  },\n};\n\nexport const DividerBlockHtmlAdapterExtension = BlockHtmlAdapterExtension(\n  dividerBlockHtmlAdapterMatcher\n);\n"]}