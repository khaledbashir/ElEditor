{"version":3,"file":"embed-card-edit-modal.js","sourceRoot":"","sources":["../../../../../src/_common/components/embed-card/modal/embed-card-edit-modal.ts"],"names":[],"mappings":"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","sourcesContent":["import type { AliasInfo } from '@blocksuite/affine-model';\nimport type {\n  BlockComponent,\n  BlockStdScope,\n  EditorHost,\n} from '@blocksuite/block-std';\n\nimport {\n  EmbedLinkedDocBlockComponent,\n  EmbedSyncedDocBlockComponent,\n} from '@blocksuite/affine-block-embed';\nimport {\n  notifyLinkedDocClearedAliases,\n  notifyLinkedDocSwitchedToCard,\n} from '@blocksuite/affine-components/notification';\nimport { toast } from '@blocksuite/affine-components/toast';\nimport {\n  EmbedLinkedDocModel,\n  EmbedSyncedDocModel,\n} from '@blocksuite/affine-model';\nimport {\n  type LinkEventType,\n  type TelemetryEvent,\n  TelemetryProvider,\n} from '@blocksuite/affine-shared/services';\nimport { FONT_SM, FONT_XS } from '@blocksuite/affine-shared/styles';\nimport { unsafeCSSVarV2 } from '@blocksuite/affine-shared/theme';\nimport {\n  listenClickAway,\n  stopPropagation,\n} from '@blocksuite/affine-shared/utils';\nimport { SignalWatcher, WithDisposable } from '@blocksuite/global/utils';\nimport { autoUpdate, computePosition, flip, offset } from '@floating-ui/dom';\nimport { computed, signal } from '@preact/signals-core';\nimport { css, html, LitElement } from 'lit';\nimport { property, query } from 'lit/decorators.js';\nimport { choose } from 'lit/directives/choose.js';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { live } from 'lit/directives/live.js';\n\nimport type { LinkableEmbedModel } from '../type.js';\n\nimport { isInternalEmbedModel } from '../type.js';\n\nexport class EmbedCardEditModal extends SignalWatcher(\n  WithDisposable(LitElement)\n) {\n  static override styles = css`\n    :host {\n      position: absolute;\n      top: 0;\n      left: 0;\n      z-index: var(--affine-z-index-popover);\n      animation: affine-popover-fade-in 0.2s ease;\n    }\n\n    @keyframes affine-popover-fade-in {\n      from {\n        opacity: 0;\n        transform: translateY(-3px);\n      }\n      to {\n        opacity: 1;\n        transform: translateY(0);\n      }\n    }\n\n    .embed-card-modal-wrapper {\n      display: flex;\n      padding: 12px;\n      flex-direction: column;\n      justify-content: flex-end;\n      align-items: flex-start;\n      gap: 12px;\n      width: 421px;\n\n      color: var(--affine-icon-color);\n      box-shadow: var(--affine-overlay-shadow);\n      background: ${unsafeCSSVarV2('layer/background/overlayPanel')};\n      border-radius: 4px;\n      border: 0.5px solid ${unsafeCSSVarV2('layer/insideBorder/border')};\n    }\n\n    .row {\n      width: 100%;\n      display: flex;\n      align-items: center;\n      gap: 12px;\n    }\n\n    .row .input {\n      display: flex;\n      padding: 4px 10px;\n      width: 100%;\n      min-width: 100%;\n      box-sizing: border-box;\n      border-radius: 4px;\n      user-select: none;\n      background: transparent;\n      border: 1px solid ${unsafeCSSVarV2('input/border/default')};\n      color: var(--affine-text-primary-color);\n      ${FONT_SM};\n    }\n    .input::placeholder {\n      color: var(--affine-placeholder-color);\n    }\n    .input:focus {\n      border-color: ${unsafeCSSVarV2('input/border/active')};\n      outline: none;\n    }\n\n    textarea.input {\n      min-height: 80px;\n      resize: none;\n    }\n\n    .row.actions {\n      justify-content: flex-end;\n    }\n\n    .row.actions .button {\n      display: flex;\n      padding: 4px 12px;\n      align-items: center;\n      gap: 4px;\n      border-radius: 4px;\n      border: 1px solid ${unsafeCSSVarV2('button/innerBlackBorder')};\n      background: ${unsafeCSSVarV2('button/secondary')};\n      ${FONT_XS};\n      color: ${unsafeCSSVarV2('text/primary')};\n    }\n    .row.actions .button[disabled],\n    .row.actions .button:disabled {\n      pointer-events: none;\n      color: ${unsafeCSSVarV2('text/disable')};\n    }\n    .row.actions .button.save {\n      color: ${unsafeCSSVarV2('button/pureWhiteText')};\n      background: ${unsafeCSSVarV2('button/primary')};\n    }\n    .row.actions .button[disabled].save,\n    .row.actions .button:disabled.save {\n      opacity: 0.5;\n    }\n  `;\n\n  private _blockComponent: BlockComponent | null = null;\n\n  private _hide = () => {\n    this.remove();\n  };\n\n  private _onKeydown = (e: KeyboardEvent) => {\n    e.stopPropagation();\n    if (e.key === 'Enter' && !(e.isComposing || e.shiftKey)) {\n      this._onSave();\n    }\n    if (e.key === 'Escape') {\n      e.preventDefault();\n      this.remove();\n    }\n  };\n\n  private _onReset = () => {\n    const blockComponent = this._blockComponent;\n\n    if (!blockComponent) {\n      this.remove();\n      return;\n    }\n\n    const std = blockComponent.std;\n\n    this.model.doc.updateBlock(this.model, { title: null, description: null });\n\n    if (\n      this.isEmbedLinkedDocModel &&\n      blockComponent instanceof EmbedLinkedDocBlockComponent\n    ) {\n      blockComponent.refreshData();\n\n      notifyLinkedDocClearedAliases(std);\n    }\n    blockComponent.requestUpdate();\n\n    track(std, this.model, this.viewType, 'ResetedAlias', { control: 'reset' });\n\n    this.remove();\n  };\n\n  private _onSave = () => {\n    const blockComponent = this._blockComponent;\n\n    if (!blockComponent) {\n      this.remove();\n      return;\n    }\n\n    const title = this.title$.value.trim();\n    if (title.length === 0) {\n      toast(this.host, 'Title can not be empty');\n      return;\n    }\n\n    const std = blockComponent.std;\n\n    const description = this.description$.value.trim();\n\n    const props: AliasInfo = { title };\n    if (description) props.description = description;\n\n    if (\n      this.isEmbedSyncedDocModel &&\n      blockComponent instanceof EmbedSyncedDocBlockComponent\n    ) {\n      blockComponent.convertToCard(props);\n\n      notifyLinkedDocSwitchedToCard(std);\n    } else {\n      this.model.doc.updateBlock(this.model, props);\n      blockComponent.requestUpdate();\n    }\n\n    track(std, this.model, this.viewType, 'SavedAlias', { control: 'save' });\n\n    this.remove();\n  };\n\n  private _updateDescription = (e: InputEvent) => {\n    const target = e.target as HTMLTextAreaElement;\n    this.description$.value = target.value;\n  };\n\n  private _updateTitle = (e: InputEvent) => {\n    const target = e.target as HTMLInputElement;\n    this.title$.value = target.value;\n  };\n\n  get isEmbedLinkedDocModel() {\n    return this.model instanceof EmbedLinkedDocModel;\n  }\n\n  get isEmbedSyncedDocModel() {\n    return this.model instanceof EmbedSyncedDocModel;\n  }\n\n  get isInternalEmbedModel() {\n    return isInternalEmbedModel(this.model);\n  }\n\n  get modelType(): 'linked' | 'synced' | null {\n    if (this.isEmbedLinkedDocModel) return 'linked';\n    if (this.isEmbedSyncedDocModel) return 'synced';\n    return null;\n  }\n\n  get placeholders() {\n    if (this.isInternalEmbedModel) {\n      return {\n        title: 'Add title alias',\n        description:\n          'Add description alias (empty to inherit document content)',\n      };\n    }\n\n    return {\n      title: 'Write a title',\n      description: 'Write a description...',\n    };\n  }\n\n  private _updateInfo() {\n    const title = this.model.title || this.originalDocInfo?.title || '';\n    const description =\n      this.model.description || this.originalDocInfo?.description || '';\n\n    this.title$.value = title;\n    this.description$.value = description;\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n\n    this._updateInfo();\n  }\n\n  override firstUpdated() {\n    const blockComponent = this.host.std.view.getBlock(this.model.id);\n    if (!blockComponent) return;\n\n    this._blockComponent = blockComponent;\n\n    this.disposables.add(\n      autoUpdate(blockComponent, this, () => {\n        computePosition(blockComponent, this, {\n          placement: 'top-start',\n          middleware: [flip(), offset(8)],\n        })\n          .then(({ x, y }) => {\n            this.style.left = `${x}px`;\n            this.style.top = `${y}px`;\n          })\n          .catch(console.error);\n      })\n    );\n\n    this.disposables.add(listenClickAway(this, this._hide));\n    this.disposables.addFromEvent(this, 'keydown', this._onKeydown);\n    this.disposables.addFromEvent(this, 'pointerdown', stopPropagation);\n\n    this.titleInput.focus();\n    this.titleInput.select();\n  }\n\n  override render() {\n    return html`\n      <div class=\"embed-card-modal-wrapper\">\n        <div class=\"row\">\n          <input\n            class=\"input title\"\n            type=\"text\"\n            placeholder=${this.placeholders.title}\n            .value=${live(this.title$.value)}\n            @input=${this._updateTitle}\n          />\n        </div>\n        <div class=\"row\">\n          <textarea\n            class=\"input description\"\n            maxlength=\"500\"\n            placeholder=${this.placeholders.description}\n            .value=${live(this.description$.value)}\n            @input=${this._updateDescription}\n          ></textarea>\n        </div>\n        <div class=\"row actions\">\n          ${choose(this.modelType, [\n            [\n              'linked',\n              () => html`\n                <button\n                  class=${classMap({\n                    button: true,\n                    reset: true,\n                  })}\n                  .disabled=${this.resetButtonDisabled$.value}\n                  @click=${this._onReset}\n                >\n                  Reset\n                </button>\n              `,\n            ],\n            [\n              'synced',\n              () => html`\n                <button\n                  class=${classMap({\n                    button: true,\n                    cancel: true,\n                  })}\n                  @click=${this._hide}\n                >\n                  Cancel\n                </button>\n              `,\n            ],\n          ])}\n          <button\n            class=${classMap({\n              button: true,\n              save: true,\n            })}\n            .disabled=${this.saveButtonDisabled$.value}\n            @click=${this._onSave}\n          >\n            Save\n          </button>\n        </div>\n      </div>\n    `;\n  }\n\n  accessor description$ = signal<string>('');\n\n  @property({ attribute: false })\n  accessor host!: EditorHost;\n\n  @property({ attribute: false })\n  accessor model!: LinkableEmbedModel;\n\n  @property({ attribute: false })\n  accessor originalDocInfo: AliasInfo | undefined = undefined;\n\n  accessor resetButtonDisabled$ = computed<boolean>(\n    () =>\n      !(\n        Boolean(this.model.title$.value?.length) ||\n        Boolean(this.model.description$.value?.length)\n      )\n  );\n\n  accessor saveButtonDisabled$ = computed<boolean>(\n    () => this.title$.value.trim().length === 0\n  );\n\n  accessor title$ = signal<string>('');\n\n  @query('.input.title')\n  accessor titleInput!: HTMLInputElement;\n\n  @property({ attribute: false })\n  accessor viewType!: string;\n}\n\nexport function toggleEmbedCardEditModal(\n  host: EditorHost,\n  embedCardModel: LinkableEmbedModel,\n  viewType: string,\n  originalDocInfo?: AliasInfo\n) {\n  document.body.querySelector('embed-card-edit-modal')?.remove();\n\n  const embedCardEditModal = new EmbedCardEditModal();\n  embedCardEditModal.model = embedCardModel;\n  embedCardEditModal.host = host;\n  embedCardEditModal.viewType = viewType;\n  embedCardEditModal.originalDocInfo = originalDocInfo;\n  document.body.append(embedCardEditModal);\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    'embed-card-edit-modal': EmbedCardEditModal;\n  }\n}\n\nfunction track(\n  std: BlockStdScope,\n  model: LinkableEmbedModel,\n  viewType: string,\n  event: LinkEventType,\n  props: Partial<TelemetryEvent>\n) {\n  std.getOptional(TelemetryProvider)?.track(event, {\n    segment: 'toolbar',\n    page: 'doc editor',\n    module: 'embed card edit popup',\n    type: `${viewType} view`,\n    category: isInternalEmbedModel(model) ? 'linked doc' : 'link',\n    ...props,\n  });\n}\n"]}