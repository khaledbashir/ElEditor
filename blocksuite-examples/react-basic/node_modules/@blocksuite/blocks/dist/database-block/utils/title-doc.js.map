{"version":3,"file":"title-doc.js","sourceRoot":"","sources":["../../../src/database-block/utils/title-doc.ts"],"names":[],"mappings":"AAGA,MAAM,CAAC,MAAM,sBAAsB,GAAG,CAAC,IAAW,EAAE,EAAE;IACpD,MAAM,MAAM,GAAG,IAAI,EAAE,OAAO,CAAC,KAAK,CAAC;IACnC,IAAI,CAAC,MAAM;QAAE,OAAO;IACpB,IAAI,WAAW,GAAuB,SAAS,CAAC;IAChD,KAAK,MAAM,KAAK,IAAI,MAAM,EAAE,CAAC;QAC3B,IAAI,WAAW,CAAC,KAAK,CAAC,EAAE,CAAC;YACvB,IAAI,WAAW,EAAE,CAAC;gBAChB,OAAO;YACT,CAAC;YACD,WAAW,GAAG,KAAK,CAAC,UAAU,EAAE,SAAS,EAAE,MAAgB,CAAC;QAC9D,CAAC;aAAM,IAAI,KAAK,CAAC,MAAM,EAAE,CAAC;YACxB,OAAO;QACT,CAAC;IACH,CAAC;IACD,OAAO,WAAW,CAAC;AACrB,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,WAAW,GAAG,CAAC,KAAqB,EAAE,EAAE;IACnD,MAAM,UAAU,GAAqC,KAAK,CAAC,UAAU,CAAC;IACtE,OAAO,UAAU,EAAE,SAAS,EAAE,IAAI,KAAK,YAAY,CAAC;AACtD,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,UAAU,GAAG,CAAC,IAAW,EAAW,EAAE;IACjD,MAAM,MAAM,GAAG,IAAI,EAAE,OAAO,CAAC,KAAK,CAAC;IACnC,IAAI,CAAC,MAAM;QAAE,OAAO,IAAI,CAAC;IACzB,OAAO,MAAM,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;AAC5C,CAAC,CAAC","sourcesContent":["import type { AffineTextAttributes } from '@blocksuite/affine-shared/types';\nimport type { DeltaOperation, Text } from '@blocksuite/store';\n\nexport const getSingleDocIdFromText = (text?: Text) => {\n  const deltas = text?.deltas$.value;\n  if (!deltas) return;\n  let linkedDocId: string | undefined = undefined;\n  for (const delta of deltas) {\n    if (isLinkedDoc(delta)) {\n      if (linkedDocId) {\n        return;\n      }\n      linkedDocId = delta.attributes?.reference?.pageId as string;\n    } else if (delta.insert) {\n      return;\n    }\n  }\n  return linkedDocId;\n};\n\nexport const isLinkedDoc = (delta: DeltaOperation) => {\n  const attributes: AffineTextAttributes | undefined = delta.attributes;\n  return attributes?.reference?.type === 'LinkedPage';\n};\n\nexport const isPureText = (text?: Text): boolean => {\n  const deltas = text?.deltas$.value;\n  if (!deltas) return true;\n  return deltas.every(v => !isLinkedDoc(v));\n};\n"]}