{"version":3,"file":"plain-text.js","sourceRoot":"","sources":["../../../src/common/adapters/plain-text.ts"],"names":[],"mappings":"AAEA,MAAM,UAAU,uCAAuC,CACrD,OAAe,EACf,EACE,OAAO,GAAG,GAAG,EAAE,CAAC,KAAK,EACrB,SAAS,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,OAAO,EAC3C,eAAe,GAAG,EAAE,EACpB,iBAAiB,GAAG;IAClB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE;QACpB,MAAM,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;QAC/B,gBAAgB;QAChB,IACE,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,KAAK,QAAQ;YACtC,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,KAAK,QAAQ,EACpC,CAAC;YACD,OAAO;QACT,CAAC;QACD,MAAM,MAAM,GAAG,IAAI,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,KAAK,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC;QAC9D,IAAI,MAAM,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YACtB,UAAU,CAAC,OAAO,IAAI,MAAM,CAAC;YAC7B,UAAU,CAAC,OAAO,IAAI,IAAI,CAAC;QAC7B,CAAC;IACH,CAAC;CACF,MAMC,EAAE;IAEN,OAAO;QACL,OAAO;QACP,OAAO;QACP,SAAS;QACT,eAAe;QACf,iBAAiB;KAClB,CAAC;AACJ,CAAC","sourcesContent":["import type { BlockPlainTextAdapterMatcher } from '@blocksuite/affine-shared/adapters';\n\nexport function createEmbedBlockPlainTextAdapterMatcher(\n  flavour: string,\n  {\n    toMatch = () => false,\n    fromMatch = o => o.node.flavour === flavour,\n    toBlockSnapshot = {},\n    fromBlockSnapshot = {\n      enter: (o, context) => {\n        const { textBuffer } = context;\n        // Parse as link\n        if (\n          typeof o.node.props.title !== 'string' ||\n          typeof o.node.props.url !== 'string'\n        ) {\n          return;\n        }\n        const buffer = `[${o.node.props.title}](${o.node.props.url})`;\n        if (buffer.length > 0) {\n          textBuffer.content += buffer;\n          textBuffer.content += '\\n';\n        }\n      },\n    },\n  }: {\n    toMatch?: BlockPlainTextAdapterMatcher['toMatch'];\n    fromMatch?: BlockPlainTextAdapterMatcher['fromMatch'];\n    toBlockSnapshot?: BlockPlainTextAdapterMatcher['toBlockSnapshot'];\n    fromBlockSnapshot?: BlockPlainTextAdapterMatcher['fromBlockSnapshot'];\n  } = {}\n): BlockPlainTextAdapterMatcher {\n  return {\n    flavour,\n    toMatch,\n    fromMatch,\n    toBlockSnapshot,\n    fromBlockSnapshot,\n  };\n}\n"]}