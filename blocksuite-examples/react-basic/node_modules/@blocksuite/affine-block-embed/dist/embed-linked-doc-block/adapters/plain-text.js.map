{"version":3,"file":"plain-text.js","sourceRoot":"","sources":["../../../src/embed-linked-doc-block/adapters/plain-text.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,yBAAyB,EAAE,MAAM,0BAA0B,CAAC;AACrE,OAAO,EACL,8BAA8B,GAE/B,MAAM,oCAAoC,CAAC;AAE5C,OAAO,EAAE,cAAc,EAAE,MAAM,gCAAgC,CAAC;AAEhE,MAAM,CAAC,MAAM,0CAA0C,GACrD;IACE,OAAO,EAAE,yBAAyB,CAAC,KAAK,CAAC,OAAO;IAChD,OAAO,EAAE,GAAG,EAAE,CAAC,KAAK;IACpB,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,OAAO,KAAK,yBAAyB,CAAC,KAAK,CAAC,OAAO;IAC1E,eAAe,EAAE,EAAE;IACnB,iBAAiB,EAAE;QACjB,KAAK,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE;YACpB,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,OAAO,CAAC;YACxC,gBAAgB;YAChB,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;gBACzB,OAAO;YACT,CAAC;YACD,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,IAAI,UAAU,CAAC;YACxE,MAAM,GAAG,GAAG,cAAc,CACxB,OAAO,CAAC,GAAG,CAAC,gBAAgB,CAAC,IAAI,EAAE,EACnC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,EAC3B,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,IAAI,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,CAC3C,CAAC;YACF,UAAU,CAAC,OAAO,IAAI,GAAG,KAAK,KAAK,GAAG,IAAI,CAAC;QAC7C,CAAC;KACF;CACF,CAAC;AAEJ,MAAM,CAAC,MAAM,4CAA4C,GACvD,8BAA8B,CAAC,0CAA0C,CAAC,CAAC","sourcesContent":["import { EmbedLinkedDocBlockSchema } from '@blocksuite/affine-model';\nimport {\n  BlockPlainTextAdapterExtension,\n  type BlockPlainTextAdapterMatcher,\n} from '@blocksuite/affine-shared/adapters';\n\nimport { generateDocUrl } from '../../common/adapters/utils.js';\n\nexport const embedLinkedDocBlockPlainTextAdapterMatcher: BlockPlainTextAdapterMatcher =\n  {\n    flavour: EmbedLinkedDocBlockSchema.model.flavour,\n    toMatch: () => false,\n    fromMatch: o => o.node.flavour === EmbedLinkedDocBlockSchema.model.flavour,\n    toBlockSnapshot: {},\n    fromBlockSnapshot: {\n      enter: (o, context) => {\n        const { configs, textBuffer } = context;\n        // Parse as link\n        if (!o.node.props.pageId) {\n          return;\n        }\n        const title = configs.get('title:' + o.node.props.pageId) ?? 'untitled';\n        const url = generateDocUrl(\n          configs.get('docLinkBaseUrl') ?? '',\n          String(o.node.props.pageId),\n          o.node.props.params ?? Object.create(null)\n        );\n        textBuffer.content += `${title}: ${url}\\n`;\n      },\n    },\n  };\n\nexport const EmbedLinkedDocBlockPlainTextAdapterExtension =\n  BlockPlainTextAdapterExtension(embedLinkedDocBlockPlainTextAdapterMatcher);\n"]}