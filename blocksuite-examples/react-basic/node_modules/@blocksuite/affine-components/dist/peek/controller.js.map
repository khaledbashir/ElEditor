{"version":3,"file":"controller.js","sourceRoot":"","sources":["../../src/peek/controller.ts"],"names":[],"mappings":"AAIA,OAAO,EAAE,gBAAgB,EAAE,MAAM,cAAc,CAAC;AAEhD,MAAM,OAAO,kBAAkB;IAc7B,IAAI,QAAQ;QACV,OAAO,CACL,CAAC,CAAC,IAAI,CAAC,mBAAmB,EAAE;YAC5B,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAChD,CAAC;IACJ,CAAC;IAED,YACU,MAAS,EACT,MAA0B;QAD1B,WAAM,GAAN,MAAM,CAAG;QACT,WAAM,GAAN,MAAM,CAAoB;QAtB5B,wBAAmB,GAAG,GAA2B,EAAE;YACzD,OAAO,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,gBAAgB,CAAC,CAAC;QACvD,CAAC,CAAC;QAEF,SAAI,GAAG,CAAC,QAAyB,EAAE,EAAE;YACnC,OAAO,OAAO,CAAC,OAAO,CACpB,IAAI,CAAC,mBAAmB,EAAE,EAAE,IAAI,CAAC;gBAC/B,MAAM,EAAE,IAAI,CAAC,MAAM;gBACnB,QAAQ;aACT,CAAC,CACH,CAAC;QACJ,CAAC,CAAC;IAYC,CAAC;CACL","sourcesContent":["import type { TemplateResult } from 'lit';\n\nimport type { PeekableClass, PeekViewService } from './type.js';\n\nimport { PeekViewProvider } from './service.js';\n\nexport class PeekableController<T extends PeekableClass> {\n  private _getPeekViewService = (): PeekViewService | null => {\n    return this.target.std.getOptional(PeekViewProvider);\n  };\n\n  peek = (template?: TemplateResult) => {\n    return Promise.resolve<void>(\n      this._getPeekViewService()?.peek({\n        target: this.target,\n        template,\n      })\n    );\n  };\n\n  get peekable() {\n    return (\n      !!this._getPeekViewService() &&\n      (this.enable ? this.enable(this.target) : true)\n    );\n  }\n\n  constructor(\n    private target: T,\n    private enable?: (e: T) => boolean\n  ) {}\n}\n"]}