{"version":3,"file":"scroll-anchoring.js","sourceRoot":"","sources":["../src/scroll-anchoring.ts"],"names":[],"mappings":"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","sourcesContent":["import type { DocMode } from '@blocksuite/affine-model';\n\nimport '@blocksuite/affine-shared/selection';\nimport { WidgetComponent } from '@blocksuite/block-std';\nimport {\n  GfxControllerIdentifier,\n  type GfxModel,\n} from '@blocksuite/block-std/gfx';\nimport { Bound, deserializeXYWH } from '@blocksuite/global/utils';\nimport { computed, signal } from '@preact/signals-core';\nimport { cssVarV2 } from '@toeverything/theme/v2';\nimport { css, html, nothing, unsafeCSS } from 'lit';\nimport { classMap } from 'lit/directives/class-map.js';\nimport { styleMap } from 'lit/directives/style-map.js';\n\ntype Anchor = {\n  id: string;\n  mode: DocMode;\n};\n\nexport const AFFINE_SCROLL_ANCHORING_WIDGET = 'affine-scroll-anchoring-widget';\n\nexport class AffineScrollAnchoringWidget extends WidgetComponent {\n  static override styles = css`\n    :host {\n      pointer-events: none;\n      position: absolute;\n      left: 0px;\n      top: 0px;\n      transform-origin: left top;\n      contain: size layout;\n      z-index: 1;\n\n      & .highlight {\n        position: absolute;\n        box-sizing: border-box;\n\n        &.edgeless {\n          border-width: 1.39px;\n          border-style: solid;\n          border-color: ${unsafeCSS(\n            cssVarV2('layer/insideBorder/primaryBorder')\n          )};\n          box-shadow: var(--affine-active-shadow);\n        }\n\n        &.page {\n          border-radius: 5px;\n          background-color: var(--affine-hover-color);\n        }\n      }\n    }\n  `;\n\n  #listened = false;\n\n  #requestUpdateFn = () => this.requestUpdate();\n\n  #resizeObserver: ResizeObserver = new ResizeObserver(this.#requestUpdateFn);\n\n  anchor$ = signal<Anchor | null>(null);\n\n  anchorBounds$ = signal<Bound | null>(null);\n\n  highlighted$ = computed(() =>\n    this.service.selectionManager.find('highlight')\n  );\n\n  #getBoundsInEdgeless() {\n    const controller = this.std.getOptional(GfxControllerIdentifier);\n    if (!controller) return;\n\n    const bounds = this.anchorBounds$.peek();\n    if (!bounds) return;\n\n    const { x, y, w, h } = bounds;\n    const zoom = controller.viewport.zoom;\n    const [vx, vy] = controller.viewport.toViewCoord(x, y);\n\n    return new Bound(vx, vy, w * zoom, h * zoom);\n  }\n\n  #getBoundsInPage(id: string) {\n    const blockComponent = this.std.view.getBlock(id);\n    if (!blockComponent) return;\n\n    const container = this.host;\n    const containerRect = container.getBoundingClientRect();\n    const { left, top, width, height } = blockComponent.getBoundingClientRect();\n\n    const offsetX = containerRect.left - container.offsetLeft;\n    const offsetY = containerRect.top - container.offsetTop;\n\n    return new Bound(left - offsetX, top - offsetY, width, height);\n  }\n\n  #moveToAnchorInEdgeless(id: string) {\n    const controller = this.std.getOptional(GfxControllerIdentifier);\n    if (!controller) return;\n\n    const surface = controller.surface;\n    if (!surface) return;\n\n    const xywh = controller.getElementById<GfxModel>(id)?.xywh;\n    if (!xywh) {\n      if (!this.#listened) return;\n\n      // listen for document updates\n      this.disposables.add(\n        this.std.doc.slots.blockUpdated\n          .filter(v => v.type === 'add' && v.id === id)\n          .once(() => this.#moveToAnchorInEdgeless(id))\n      );\n\n      this.disposables.add(\n        surface.elementAdded\n          .filter(v => v.id === id && v.local === false)\n          .once(() => this.#moveToAnchorInEdgeless(id))\n      );\n      return;\n    }\n\n    let bounds = Bound.fromXYWH(deserializeXYWH(xywh));\n\n    const viewport = controller.viewport;\n    const blockComponent = this.std.view.getBlock(id);\n    const parentComponent = blockComponent?.parentComponent;\n    if (parentComponent && parentComponent.flavour === 'affine:note') {\n      const { left: x, width: w } = parentComponent.getBoundingClientRect();\n      const { top: y, height: h } = blockComponent.getBoundingClientRect();\n      const coord = viewport.toModelCoordFromClientCoord([x, y]);\n      bounds = new Bound(\n        coord[0],\n        coord[1],\n        w / viewport.zoom,\n        h / viewport.zoom\n      );\n    }\n\n    const { zoom, centerX, centerY } = viewport.getFitToScreenData(\n      bounds,\n      [20, 20, 100, 20]\n    );\n\n    viewport.setZoom(zoom);\n    viewport.setCenter(centerX, centerY);\n\n    this.#listened = false;\n    this.anchorBounds$.value = bounds;\n  }\n\n  #moveToAnchorInPage(id: string) {\n    const blockComponent = this.std.view.getBlock(id);\n    if (!blockComponent) {\n      if (!this.#listened) return;\n\n      // listen for document updates\n      this.disposables.add(\n        this.std.doc.slots.blockUpdated\n          .filter(v => v.type === 'add' && v.id === id)\n          .once(() => this.#moveToAnchorInPage(id))\n      );\n      return;\n    }\n\n    // use `requestAnimationFrame` to better scroll to the target\n    // because sometimes it is impossible to scroll to the target\n    requestAnimationFrame(() => {\n      blockComponent.scrollIntoView({\n        behavior: 'instant',\n        block: 'center',\n      });\n    });\n\n    this.#listened = false;\n    this.anchorBounds$.value = Bound.fromDOMRect(\n      blockComponent.getBoundingClientRect()\n    );\n  }\n\n  override connectedCallback() {\n    super.connectedCallback();\n\n    this.#resizeObserver.observe(this.host);\n    this.handleEvent('wheel', this.#requestUpdateFn);\n    this.disposables.addFromEvent(window, 'resize', this.#requestUpdateFn);\n\n    // Clears highlight\n    this.disposables.addFromEvent(this.host, 'pointerdown', () => {\n      this.#listened = false;\n      this.anchor$.value = null;\n      this.anchorBounds$.value = null;\n    });\n\n    // In edgeless\n    const controler = this.std.getOptional(GfxControllerIdentifier);\n    if (controler) {\n      this.disposables.add(\n        controler.viewport.viewportUpdated.on(this.#requestUpdateFn)\n      );\n    }\n\n    this.disposables.add(\n      this.anchor$.subscribe(anchor => {\n        if (!anchor) return;\n\n        const { mode, id } = anchor;\n\n        if (mode === 'page') {\n          this.#moveToAnchorInPage(id);\n          return;\n        }\n\n        this.#moveToAnchorInEdgeless(id);\n      })\n    );\n\n    this.disposables.add(\n      this.highlighted$.subscribe(highlighted => {\n        if (!highlighted) return;\n\n        const {\n          mode,\n          blockIds: [bid],\n          elementIds: [eid],\n        } = highlighted;\n        const id = mode === 'page' ? bid : eid || bid;\n        if (!id) return;\n\n        // Consumes highlight selection\n        this.std.selection.clear(['highlight']);\n\n        this.anchor$.value = { mode, id };\n        this.#listened = true;\n      })\n    );\n  }\n\n  override disconnectedCallback() {\n    super.disconnectedCallback();\n    this.#resizeObserver.disconnect();\n  }\n\n  override render() {\n    const anchor = this.anchor$.value;\n    if (!anchor) return nothing;\n\n    const { mode, id } = anchor;\n\n    const bounds =\n      mode === 'page' ? this.#getBoundsInPage(id) : this.#getBoundsInEdgeless();\n    if (!bounds) return nothing;\n\n    const classes = { highlight: true, [mode]: true };\n    const style = {\n      left: `${bounds.x}px`,\n      top: `${bounds.y}px`,\n      width: `${bounds.w}px`,\n      height: `${bounds.h}px`,\n    };\n\n    return html`<div\n      class=${classMap(classes)}\n      style=${styleMap(style)}\n    ></div>`;\n  }\n}\n"]}