{"version":3,"file":"extension.js","sourceRoot":"","sources":["../../src/gfx/extension.ts"],"names":[],"mappings":"AAAA,OAAO,EAAkB,gBAAgB,EAAE,MAAM,uBAAuB,CAAC;AACzE,OAAO,EAAE,eAAe,EAAE,SAAS,EAAE,MAAM,+BAA+B,CAAC;AAI3E,OAAO,EAAE,SAAS,EAAE,MAAM,2BAA2B,CAAC;AACtD,OAAO,EAAE,uBAAuB,EAAE,MAAM,kBAAkB,CAAC;AAE3D,MAAM,CAAC,MAAM,sBAAsB,GACjC,gBAAgB,CAAe,cAAc,CAAC,CAAC;AAEjD,MAAM,CAAC,MAAM,0BAA0B,GAAG,gBAAgB,CAEvD,kBAAkB,CAAC,CAAC;AAEvB,MAAM,OAAgB,YAAa,SAAQ,SAAS;IAGlD,IAAI,GAAG;QACL,OAAO,IAAI,CAAC,GAAG,CAAC,GAAG,CAAC;IACtB,CAAC;IAED,YAA+B,GAAkB;QAC/C,KAAK,EAAE,CAAC;QADqB,QAAG,GAAH,GAAG,CAAe;IAEjD,CAAC;IAED,kDAAkD;IAClD,MAAM,CAAC,SAAS,CAAC,CAAgB,IAAG,CAAC;IAErC,MAAM,CAAU,KAAK,CAAC,EAAa;QACjC,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;YACd,MAAM,IAAI,eAAe,CACvB,SAAS,CAAC,cAAc,EACxB,wCAAwC,CACzC,CAAC;QACJ,CAAC;QAED,EAAE,CAAC,OAAO,CAAC,0BAA0B,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE;YAC/C,QAAQ,EAAE,IAAI,CAAC,SAAS;SACzB,CAAC,CAAC;QAEH,EAAE,CAAC,GAAG,CAAC,IAA6D,EAAE;YACpE,uBAAuB;SACxB,CAAC,CAAC;QAEH,EAAE,CAAC,OAAO,CAAC,sBAAsB,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,QAAQ,CAAC,EAAE,CACtD,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CACnB,CAAC;IACJ,CAAC;IAED,OAAO,KAAI,CAAC;IAEZ,SAAS,KAAI,CAAC;CACf","sourcesContent":["import { type Container, createIdentifier } from '@blocksuite/global/di';\nimport { BlockSuiteError, ErrorCode } from '@blocksuite/global/exceptions';\n\nimport type { GfxController } from './controller.js';\n\nimport { Extension } from '../extension/extension.js';\nimport { GfxControllerIdentifier } from './identifiers.js';\n\nexport const GfxExtensionIdentifier =\n  createIdentifier<GfxExtension>('GfxExtension');\n\nexport const GfxClassExtenderIdentifier = createIdentifier<{\n  extendFn: (gfx: GfxController) => void;\n}>('GfxClassExtender');\n\nexport abstract class GfxExtension extends Extension {\n  static key: string;\n\n  get std() {\n    return this.gfx.std;\n  }\n\n  constructor(protected readonly gfx: GfxController) {\n    super();\n  }\n\n  // This method is used to extend the GfxController\n  static extendGfx(_: GfxController) {}\n\n  static override setup(di: Container) {\n    if (!this.key) {\n      throw new BlockSuiteError(\n        ErrorCode.ValueNotExists,\n        'key is not defined in the GfxExtension'\n      );\n    }\n\n    di.addImpl(GfxClassExtenderIdentifier(this.key), {\n      extendFn: this.extendGfx,\n    });\n\n    di.add(this as unknown as { new (gfx: GfxController): GfxExtension }, [\n      GfxControllerIdentifier,\n    ]);\n\n    di.addImpl(GfxExtensionIdentifier(this.key), provider =>\n      provider.get(this)\n    );\n  }\n\n  mounted() {}\n\n  unmounted() {}\n}\n"]}