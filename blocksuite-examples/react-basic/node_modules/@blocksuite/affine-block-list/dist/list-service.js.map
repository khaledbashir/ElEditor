{"version":3,"file":"list-service.js","sourceRoot":"","sources":["../src/list-service.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,eAAe,EAAE,MAAM,0BAA0B,CAAC;AAC3D,OAAO,EAAE,yBAAyB,EAAE,MAAM,oCAAoC,CAAC;AAC/E,OAAO,EAAE,aAAa,EAAE,MAAM,iCAAiC,CAAC;AAChE,OAAO,EAAE,YAAY,EAAE,MAAM,uBAAuB,CAAC;AAErD,OAAO,EAAE,+BAA+B,EAAE,MAAM,qBAAqB,CAAC;AAEtE,MAAM,OAAO,gBAAiB,SAAQ,YAAY;aACvB,YAAO,GAAG,eAAe,CAAC,KAAK,CAAC,OAAO,CAAC;;AAGnE,MAAM,CAAC,MAAM,oBAAoB,GAAG,yBAAyB,CAAC;IAC5D,OAAO,EAAE,eAAe,CAAC,KAAK,CAAC,OAAO;IACtC,SAAS,EAAE,CAAC,EAAE,gBAAgB,EAAE,UAAU,EAAE,EAAE,EAAE;QAC9C,gBAAgB,CAAC,OAAO,CAAC,CAAC,EAAkB,EAAE,EAAE;YAC9C,MAAM,KAAK,GAAG,EAAE,CAAC,KAAK,CAAC;YACvB,MAAM,GAAG,GAAG,EAAE,CAAC,GAAG,CAAC;YACnB,IAAI,aAAa,CAAC,KAAK,EAAE,CAAC,aAAa,CAAC,CAAC,IAAI,KAAK,CAAC,IAAI,KAAK,UAAU,EAAE,CAAC;gBACvE,MAAM,IAAI,GAAG,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;gBACnC,UAAU,CAAC,cAAc;qBACtB,IAAI,CAAC,GAAG,EAAE;oBACT,+BAA+B,CAAC,GAAG,EAAE,KAAK,CAAC,CAAC;oBAC5C,IAAI,IAAI,EAAE,CAAC;wBACT,+BAA+B,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;oBAC7C,CAAC;gBACH,CAAC,CAAC;qBACD,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;YAC1B,CAAC;QACH,CAAC,CAAC,CAAC;QACH,OAAO,KAAK,CAAC;IACf,CAAC;CACF,CAAC,CAAC","sourcesContent":["import type { BlockComponent } from '@blocksuite/block-std';\n\nimport { ListBlockSchema } from '@blocksuite/affine-model';\nimport { DragHandleConfigExtension } from '@blocksuite/affine-shared/services';\nimport { matchFlavours } from '@blocksuite/affine-shared/utils';\nimport { BlockService } from '@blocksuite/block-std';\n\nimport { correctNumberedListsOrderToPrev } from './commands/utils.js';\n\nexport class ListBlockService extends BlockService {\n  static override readonly flavour = ListBlockSchema.model.flavour;\n}\n\nexport const ListDragHandleOption = DragHandleConfigExtension({\n  flavour: ListBlockSchema.model.flavour,\n  onDragEnd: ({ draggingElements, editorHost }) => {\n    draggingElements.forEach((el: BlockComponent) => {\n      const model = el.model;\n      const doc = el.doc;\n      if (matchFlavours(model, ['affine:list']) && model.type === 'numbered') {\n        const next = el.doc.getNext(model);\n        editorHost.updateComplete\n          .then(() => {\n            correctNumberedListsOrderToPrev(doc, model);\n            if (next) {\n              correctNumberedListsOrderToPrev(doc, next);\n            }\n          })\n          .catch(console.error);\n      }\n    });\n    return false;\n  },\n});\n"]}