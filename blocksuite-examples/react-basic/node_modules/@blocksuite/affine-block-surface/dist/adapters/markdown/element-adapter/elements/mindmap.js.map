{"version":3,"file":"mindmap.js","sourceRoot":"","sources":["../../../../../src/adapters/markdown/element-adapter/elements/mindmap.ts"],"names":[],"mappings":"AAGA,OAAO,EAAE,gBAAgB,EAAE,MAAM,2BAA2B,CAAC;AAC7D,OAAO,EAAE,YAAY,EAAE,MAAM,wBAAwB,CAAC;AAEtD,MAAM,CAAC,MAAM,+BAA+B,GAC1C;IACE,IAAI,EAAE,SAAS;IACf,KAAK,EAAE,YAAY,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,KAAK,SAAS;IACtD,KAAK,EAAE,CAAC,YAAY,EAAE,OAAO,EAAE,EAAE;QAC/B,IAAI,YAAY,CAAC,IAAI,KAAK,SAAS,EAAE,CAAC;YACpC,OAAO,IAAI,CAAC;QACd,CAAC;QAED,MAAM,WAAW,GAAG,gBAAgB,CAAC,YAAY,CAAC,CAAC;QACnD,IAAI,CAAC,WAAW,EAAE,CAAC;YACjB,OAAO,IAAI,CAAC;QACd,CAAC;QAED,MAAM,EAAE,aAAa,EAAE,QAAQ,EAAE,GAAG,OAAO,CAAC;QAC5C,MAAM,mBAAmB,GAAG,CAAC,IAAqB,EAAE,EAAE;YACpD,MAAM,YAAY,GAAG,QAAQ,CAAC,IAAI,CAAC,EAAY,CAAC,CAAC;YACjD,MAAM,SAAS,GAAG,YAAY,CAAC,YAAY,CAAC,CAAC;YAC7C,aAAa;iBACV,QAAQ,CACP;gBACE,IAAI,EAAE,UAAU;gBAChB,MAAM,EAAE,KAAK;gBACb,QAAQ,EAAE,EAAE;aACb,EACD,UAAU,CACX;iBACA,QAAQ,CACP;gBACE,IAAI,EAAE,WAAW;gBACjB,QAAQ,EAAE;oBACR;wBACE,IAAI,EAAE,MAAM;wBACZ,KAAK,EAAE,SAAS;qBACjB;iBACF;aACF,EACD,UAAU,CACX;iBACA,SAAS,EAAE,CAAC;YACf,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;gBAC5B,mBAAmB,CAAC,KAAK,CAAC,CAAC;gBAC3B,aAAa,CAAC,SAAS,EAAE,CAAC;YAC5B,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;QAEF,iDAAiD;QACjD,aAAa,CAAC,QAAQ,CACpB;YACE,IAAI,EAAE,MAAM;YACZ,OAAO,EAAE,KAAK;YACd,MAAM,EAAE,KAAK;YACb,QAAQ,EAAE,EAAE;SACb,EACD,UAAU,CACX,CAAC;QACF,mBAAmB,CAAC,WAAW,CAAC,CAAC;QACjC,aAAa,CAAC,SAAS,EAAE,CAAC,SAAS,EAAE,CAAC;QAEtC,OAAO,IAAI,CAAC;IACd,CAAC;CACF,CAAC","sourcesContent":["import type { MindMapTreeNode } from '../../../types/mindmap.js';\nimport type { ElementModelToMarkdownAdapterMatcher } from '../type.js';\n\nimport { buildMindMapTree } from '../../../utils/mindmap.js';\nimport { getShapeText } from '../../../utils/text.js';\n\nexport const mindmapToMarkdownAdapterMatcher: ElementModelToMarkdownAdapterMatcher =\n  {\n    name: 'mindmap',\n    match: elementModel => elementModel.type === 'mindmap',\n    toAST: (elementModel, context) => {\n      if (elementModel.type !== 'mindmap') {\n        return null;\n      }\n\n      const mindMapTree = buildMindMapTree(elementModel);\n      if (!mindMapTree) {\n        return null;\n      }\n\n      const { walkerContext, elements } = context;\n      const traverseMindMapTree = (node: MindMapTreeNode) => {\n        const shapeElement = elements[node.id as string];\n        const shapeText = getShapeText(shapeElement);\n        walkerContext\n          .openNode(\n            {\n              type: 'listItem',\n              spread: false,\n              children: [],\n            },\n            'children'\n          )\n          .openNode(\n            {\n              type: 'paragraph',\n              children: [\n                {\n                  type: 'text',\n                  value: shapeText,\n                },\n              ],\n            },\n            'children'\n          )\n          .closeNode();\n        node.children.forEach(child => {\n          traverseMindMapTree(child);\n          walkerContext.closeNode();\n        });\n      };\n\n      // First create a list node for the mind map tree\n      walkerContext.openNode(\n        {\n          type: 'list',\n          ordered: false,\n          spread: false,\n          children: [],\n        },\n        'children'\n      );\n      traverseMindMapTree(mindMapTree);\n      walkerContext.closeNode().closeNode();\n\n      return null;\n    },\n  };\n"]}